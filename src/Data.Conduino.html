<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveFunctor              #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase                 #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms            #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                 #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables        #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TupleSections              #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeInType                 #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns               #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Module      : Data.Conduino</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- Copyright   : (c) Justin Le 2019</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- License     : BSD3</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Maintainer  : justin@jle.im</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Portability : non-portable</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- Base API for 'Pipe'.  See documentation for 'Pipe', '.|', and 'runPipe'</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- for information on usage.</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- A &quot;prelude&quot; of useful pipes can be found in &quot;Data.Conduino.Combinators&quot;.</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- == Why a stream processing library?</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- A stream processing library is a way to stream processors in a /composable/ way:</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- instead of defining your entire stream processing function as a single</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- recursive loop with some global state, instead think about each &quot;stage&quot; of the process,</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- and isolate each state to its own segment.  Each component can contain its own</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- isolated state:</span><span>
</span><span id="line-33"></span><span class="hs-comment">--</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- &gt;&gt;&gt; runPipePure $ sourceList [1..10]</span><span>
</span><span id="line-35"></span><span class="hs-comment">--       .| scan (+) 0</span><span>
</span><span id="line-36"></span><span class="hs-comment">--       .| sinkList</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- [1,3,6,10,15,21,28,36,45,55]</span><span>
</span><span id="line-38"></span><span class="hs-comment">--</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- All of these components have internal &quot;state&quot;:</span><span>
</span><span id="line-40"></span><span class="hs-comment">--</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- *   @sourceList@ keeps track of &quot;which&quot; item in the list to yield next</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- *   @scan@ keeps track of the current running sum</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- *   @sinkList@ keeps track of all items that have been seen so far, as a list</span><span>
</span><span id="line-44"></span><span class="hs-comment">--</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- They all work together without knowing any other component's internal state, so</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- you can write your total streaming function without concerning yourself, at</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- each stage, with the entire part.</span><span>
</span><span id="line-48"></span><span class="hs-comment">--</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- In addition, there are useful functions to &quot;combine&quot; stream processors:</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- *   'zipSink' combines sinks in an &quot;and&quot; sort of way: combine two sinks in</span><span>
</span><span id="line-52"></span><span class="hs-comment">--     parallel and finish when all finish.</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- *   'altSink' combines sinks in an &quot;or&quot; sort of way: combine two sinks in</span><span>
</span><span id="line-54"></span><span class="hs-comment">--     parallel and finish when any of them finish</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- *   'zipSource' combines sources in parallel and collate their outputs.</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- Stream processing libraries are also useful for streaming composition of</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- monadic effects (like IO or State), as well.</span><span>
</span><span id="line-59"></span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Conduino</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier">Pipe</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#.%7C"><span class="hs-operator">(.|)</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#runPipe"><span class="hs-identifier">runPipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#runPipePure"><span class="hs-identifier">runPipePure</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Primitives</span></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier">awaitEither</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#await"><span class="hs-identifier">await</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#awaitWith"><span class="hs-identifier">awaitWith</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#awaitSurely"><span class="hs-identifier">awaitSurely</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#awaitForever"><span class="hs-identifier">awaitForever</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier">yield</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Special chaining</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#%26%7C"><span class="hs-operator">(&amp;|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#%7C."><span class="hs-operator">(|.)</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#fuseBoth"><span class="hs-identifier">fuseBoth</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#fuseUpstream"><span class="hs-identifier">fuseUpstream</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#fuseBothMaybe"><span class="hs-identifier">fuseBothMaybe</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Incremental running</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#squeezePipe"><span class="hs-identifier">squeezePipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#squeezePipeEither"><span class="hs-identifier">squeezePipeEither</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#feedPipe"><span class="hs-identifier">feedPipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#feedPipeEither"><span class="hs-identifier">feedPipeEither</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Pipe transformers</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#mapInput"><span class="hs-identifier">mapInput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#mapOutput"><span class="hs-identifier">mapOutput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#mapUpRes"><span class="hs-identifier">mapUpRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#trimapPipe"><span class="hs-identifier">trimapPipe</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#hoistPipe"><span class="hs-identifier">hoistPipe</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#feedbackPipe"><span class="hs-identifier">feedbackPipe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#feedbackPipeEither"><span class="hs-identifier">feedbackPipeEither</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Wrappers</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier">ZipSource</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#unconsZipSource"><span class="hs-identifier">unconsZipSource</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#zipSource"><span class="hs-identifier">zipSource</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier">ZipSink</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#zipSink"><span class="hs-identifier">zipSink</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#altSink"><span class="hs-identifier">altSink</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Generators</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#toListT"><span class="hs-identifier">toListT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#fromListT"><span class="hs-identifier">fromListT</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier">PipeList</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#withSource"><span class="hs-identifier">withSource</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#genSource"><span class="hs-identifier">genSource</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Free</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FreeT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FreeF</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Free.Church</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.State</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Conduino.Internal.html"><span class="hs-identifier">Data.Conduino.Internal</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Functor</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Seq</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">List.Transformer</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ListT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Step</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span>                   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">List.Transformer</span></span><span>                </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LT</span></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Await input from upstream.  Will block until upstream 'yield's.</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- Will return 'Nothing' if the upstream pipe finishes and terminates.</span><span>
</span><span id="line-107"></span><span class="hs-comment">--</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- If the upstream pipe never terminates, then you can use 'awaitSurely' to</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- guarantee a result.</span><span>
</span><span id="line-110"></span><span class="hs-comment">--</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- Will always return 'Just' if @u@ is 'Void'.</span><span>
</span><span id="line-112"></span><span id="local-6989586621679109183"><span id="local-6989586621679109184"><span id="local-6989586621679109185"><span id="local-6989586621679109186"><span class="annot"><a href="Data.Conduino.html#await"><span class="hs-identifier hs-type">await</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109186"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109185"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109184"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109183"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679109186"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-113"></span><span id="await"><span class="annot"><span class="annottext">await :: Pipe i o u m (Maybe i)
</span><a href="Data.Conduino.html#await"><span class="hs-identifier hs-var hs-var">await</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(u -&gt; Maybe i) -&gt; (i -&gt; Maybe i) -&gt; Either u i -&gt; Maybe i
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe i -&gt; u -&gt; Maybe i
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe i
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">i -&gt; Maybe i
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Either u i -&gt; Maybe i)
-&gt; Pipe i o u m (Either u i) -&gt; Pipe i o u m (Maybe i)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-- | 'await', but directly chaining a continuation if the 'await' was</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- succesful.</span><span>
</span><span id="line-117"></span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- The await will always be succesful if @u@ is 'Void'.</span><span>
</span><span id="line-119"></span><span class="hs-comment">--</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- This is a way of writing code in a way that is agnostic to how the</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- upstream pipe terminates.</span><span>
</span><span id="line-122"></span><span id="local-6989586621679109133"><span id="local-6989586621679109134"><span id="local-6989586621679109135"><span id="local-6989586621679109136"><span class="annot"><a href="Data.Conduino.html#awaitWith"><span class="hs-identifier hs-type">awaitWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109136"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109136"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109135"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109134"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109133"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109134"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109136"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109135"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109134"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109133"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109134"><span class="hs-identifier hs-type">u</span></a></span></span></span></span></span><span>
</span><span id="line-123"></span><span id="awaitWith"><span class="annot"><span class="annottext">awaitWith :: (i -&gt; Pipe i o u m u) -&gt; Pipe i o u m u
</span><a href="Data.Conduino.html#awaitWith"><span class="hs-identifier hs-var hs-var">awaitWith</span></a></span></span><span> </span><span id="local-6989586621679109132"><span class="annot"><span class="annottext">f :: i -&gt; Pipe i o u m u
</span><a href="#local-6989586621679109132"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
-&gt; (Either u i -&gt; Pipe i o u m u) -&gt; Pipe i o u m u
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span>  </span><span id="local-6989586621679109131"><span class="annot"><span class="annottext">r :: u
</span><a href="#local-6989586621679109131"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">u -&gt; Pipe i o u m u
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">u
</span><a href="#local-6989586621679109131"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679109130"><span class="annot"><span class="annottext">x :: i
</span><a href="#local-6989586621679109130"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">i -&gt; Pipe i o u m u
</span><a href="#local-6989586621679109132"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679109130"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Await input from upstream where the upstream pipe is guaranteed to</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- never terminate.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- A common type error will occur if @u@ (upstream pipe result type) is not</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- 'Void' -- it might be @()@ or some non-'Void' type.  This means that the</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- upstream pipe terminates, so awaiting cannot be assured.</span><span>
</span><span id="line-133"></span><span class="hs-comment">--</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- In that case, either change your upstream pipe to be one that never</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- terminates (which is most likely not possible), or use 'await' instead</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- of 'awaitSurely'.</span><span>
</span><span id="line-137"></span><span id="local-6989586621679109127"><span id="local-6989586621679109128"><span id="local-6989586621679109129"><span class="annot"><a href="Data.Conduino.html#awaitSurely"><span class="hs-identifier hs-type">awaitSurely</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109129"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109128"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109127"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109129"><span class="hs-identifier hs-type">i</span></a></span></span></span></span><span>
</span><span id="line-138"></span><span id="awaitSurely"><span class="annot"><span class="annottext">awaitSurely :: Pipe i o Void m i
</span><a href="Data.Conduino.html#awaitSurely"><span class="hs-identifier hs-var hs-var">awaitSurely</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Void -&gt; i) -&gt; (i -&gt; i) -&gt; Either Void i -&gt; i
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">Void -&gt; i
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; i
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Either Void i -&gt; i)
-&gt; Pipe i o Void m (Either Void i) -&gt; Pipe i o Void m i
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o Void m (Either Void i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | A useful utility function over repeated 'await's.  Will repeatedly</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- 'await' and then continue with the given pipe whenever the upstream pipe</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- yields.</span><span>
</span><span id="line-143"></span><span class="hs-comment">--</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- Can be used to implement many pipe combinators:</span><span>
</span><span id="line-145"></span><span class="hs-comment">--</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- 'Data.Conduino.Combinators.map' f = 'awaitForever' $ \x -&gt; 'yield' (f x)</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-149"></span><span id="local-6989586621679109390"><span id="local-6989586621679109391"><span id="local-6989586621679109392"><span id="local-6989586621679109393"><span id="local-6989586621679109394"><span class="annot"><a href="Data.Conduino.html#awaitForever"><span class="hs-identifier hs-type">awaitForever</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109394"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109394"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109393"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109392"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109390"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109394"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109393"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109392"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109392"><span class="hs-identifier hs-type">u</span></a></span></span></span></span></span></span><span>
</span><span id="line-150"></span><span id="awaitForever"><span class="annot"><span class="annottext">awaitForever :: (i -&gt; Pipe i o u m a) -&gt; Pipe i o u m u
</span><a href="Data.Conduino.html#awaitForever"><span class="hs-identifier hs-var hs-var">awaitForever</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(u -&gt; Pipe () o u m u) -&gt; (i -&gt; Pipe i o u m a) -&gt; Pipe i o u m u
forall u o (m :: * -&gt; *) b i a.
(u -&gt; Pipe () o u m b) -&gt; (i -&gt; Pipe i o u m a) -&gt; Pipe i o u m b
</span><a href="Data.Conduino.html#awaitForeverWith"><span class="hs-identifier hs-var">awaitForeverWith</span></a></span><span> </span><span class="annot"><span class="annottext">u -&gt; Pipe () o u m u
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | 'awaitForever', but with a way to handle the result of the</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- upstream pipe, which will be called when the upstream pipe stops</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- producing.</span><span>
</span><span id="line-155"></span><span id="local-6989586621679109655"><span id="local-6989586621679109656"><span id="local-6989586621679109657"><span id="local-6989586621679109658"><span id="local-6989586621679109659"><span id="local-6989586621679109660"><span class="annot"><a href="Data.Conduino.html#awaitForeverWith"><span class="hs-identifier hs-type">awaitForeverWith</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109660"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109659"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109660"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109658"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109657"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>       </span><span class="hs-comment">-- ^ how to handle upstream ending, transitioning to a source</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109656"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109656"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109659"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109660"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109658"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109655"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- ^ how to handle upstream output</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109656"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109659"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109660"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109658"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109657"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-159"></span><span id="awaitForeverWith"><span class="annot"><span class="annottext">awaitForeverWith :: (u -&gt; Pipe () o u m b) -&gt; (i -&gt; Pipe i o u m a) -&gt; Pipe i o u m b
</span><a href="Data.Conduino.html#awaitForeverWith"><span class="hs-identifier hs-var hs-var">awaitForeverWith</span></a></span></span><span> </span><span id="local-6989586621679109123"><span class="annot"><span class="annottext">f :: u -&gt; Pipe () o u m b
</span><a href="#local-6989586621679109123"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679109122"><span class="annot"><span class="annottext">g :: i -&gt; Pipe i o u m a
</span><a href="#local-6989586621679109122"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m b
</span><a href="#local-6989586621679109121"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621679109121"><span class="annot"><span class="annottext">go :: Pipe i o u m b
</span><a href="#local-6989586621679109121"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
-&gt; (Either u i -&gt; Pipe i o u m b) -&gt; Pipe i o u m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679109120"><span class="annot"><span class="annottext">x :: u
</span><a href="#local-6989586621679109120"><span class="hs-identifier hs-var">x</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(i -&gt; ()) -&gt; Pipe () o u m b -&gt; Pipe i o u m b
forall i j o u (m :: * -&gt; *) a.
(i -&gt; j) -&gt; Pipe j o u m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#mapInput"><span class="hs-identifier hs-var">mapInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; i -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pipe () o u m b -&gt; Pipe i o u m b)
-&gt; Pipe () o u m b -&gt; Pipe i o u m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; Pipe () o u m b
</span><a href="#local-6989586621679109123"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">u
</span><a href="#local-6989586621679109120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679109119"><span class="annot"><span class="annottext">x :: i
</span><a href="#local-6989586621679109119"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">i -&gt; Pipe i o u m a
</span><a href="#local-6989586621679109122"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679109119"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m a -&gt; Pipe i o u m b -&gt; Pipe i o u m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m b
</span><a href="#local-6989586621679109121"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | Run a pipe that is both a source and a sink (an &quot;effect&quot;) into the</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- effect that it represents.</span><span>
</span><span id="line-167"></span><span class="hs-comment">--</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- Usually you wouild construct this using something like:</span><span>
</span><span id="line-169"></span><span class="hs-comment">--</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- 'runPipe' $ someSource</span><span>
</span><span id="line-172"></span><span class="hs-comment">--        '.|' somePipe</span><span>
</span><span id="line-173"></span><span class="hs-comment">--        .| someOtherPipe</span><span>
</span><span id="line-174"></span><span class="hs-comment">--        .| someSink</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-176"></span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- 'runPipe' will produce the result of that final sink.</span><span>
</span><span id="line-178"></span><span class="hs-comment">--</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- Some common errors you might receive:</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- *  @i@ is not @()@: If you give a pipe where the first parameter</span><span>
</span><span id="line-182"></span><span class="hs-comment">--    (&quot;input&quot;) is not @()@, it means that your pipe is not a producer.</span><span>
</span><span id="line-183"></span><span class="hs-comment">--    Pre-compose it (using '.|') with a producer of the type you need.</span><span>
</span><span id="line-184"></span><span class="hs-comment">--</span><span>
</span><span id="line-185"></span><span class="hs-comment">--    For example, if you have a @myPipe :: 'Pipe' 'Int' o u m a@, this is</span><span>
</span><span id="line-186"></span><span class="hs-comment">--    a pipe that is awaiting 'Int's from upstream.  Pre-compose with</span><span>
</span><span id="line-187"></span><span class="hs-comment">--    a producer of 'Int's, like @'Data.Conduino.Combinators.sourceList'</span><span>
</span><span id="line-188"></span><span class="hs-comment">--    [1,2,3] '.|' myPipe@, in order to be able to run it.</span><span>
</span><span id="line-189"></span><span class="hs-comment">--</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- *  @o@ is not 'Void': If you give a pipe where the second parameter</span><span>
</span><span id="line-191"></span><span class="hs-comment">--    (&quot;output&quot;) is not 'Void', it means that your pipe is not a consumer.</span><span>
</span><span id="line-192"></span><span class="hs-comment">--    Post-compose it (using '.|') with a consumer of the type you need.</span><span>
</span><span id="line-193"></span><span class="hs-comment">--</span><span>
</span><span id="line-194"></span><span class="hs-comment">--    For example, if you have @myPipe :: 'Pipe' i 'Int' u m a@, this is</span><span>
</span><span id="line-195"></span><span class="hs-comment">--    a pipe that is yielding 'Int's downstream that are going unhandled.</span><span>
</span><span id="line-196"></span><span class="hs-comment">--    Post-compose it a consumer of 'Int's, like @myPipe '.|'</span><span>
</span><span id="line-197"></span><span class="hs-comment">--    'Data.Conduino.foldl' (+) 0@, in order to be able to run it.</span><span>
</span><span id="line-198"></span><span class="hs-comment">--</span><span>
</span><span id="line-199"></span><span class="hs-comment">--    If you just want to ignore all downstream yields, post-compose with</span><span>
</span><span id="line-200"></span><span class="hs-comment">--    'Data.Conduino.Combinators.sinkNull'.</span><span>
</span><span id="line-201"></span><span class="hs-comment">--</span><span>
</span><span id="line-202"></span><span id="local-6989586621679109614"><span id="local-6989586621679109615"><span id="local-6989586621679109616"><span class="annot"><a href="Data.Conduino.html#runPipe"><span class="hs-identifier hs-type">runPipe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109616"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109615"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109616"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109614"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109616"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109614"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-203"></span><span id="runPipe"><span class="annot"><span class="annottext">runPipe :: Pipe () Void u m a -&gt; m a
</span><a href="Data.Conduino.html#runPipe"><span class="hs-identifier hs-var hs-var">runPipe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PipeF () Void u (m a) -&gt; m a) -&gt; FT (PipeF () Void u) m a -&gt; m a
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Functor f, Monad m) =&gt;
(f (m a) -&gt; m a) -&gt; FT f m a -&gt; m a
</span><span class="hs-identifier hs-var">iterT</span></span><span> </span><span class="annot"><span class="annottext">PipeF () Void u (m a) -&gt; m a
forall u p. PipeF () Void u p -&gt; p
</span><a href="#local-6989586621679109117"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(FT (PipeF () Void u) m a -&gt; m a)
-&gt; (Pipe () Void u m a -&gt; FT (PipeF () Void u) m a)
-&gt; Pipe () Void u m a
-&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pipe () Void u m a -&gt; FT (PipeF () Void u) m a
forall i o u (m :: * -&gt; *) a.
Pipe i o u m a -&gt; FT (PipeF i o u) m a
</span><a href="Data.Conduino.Internal.html#pipeFree"><span class="hs-identifier hs-var hs-var">pipeFree</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679109117"><span class="annot"><span class="annottext">go :: PipeF () Void u p -&gt; p
</span><a href="#local-6989586621679109117"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679109113"><span class="annot"><span class="annottext">f :: () -&gt; p
</span><a href="#local-6989586621679109113"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; p
</span><a href="#local-6989586621679109113"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679109111"><span class="annot"><span class="annottext">o :: Void
</span><a href="#local-6989586621679109111"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; p
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679109111"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | 'runPipe' when the underlying monad is 'Identity', and so has no</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- effects.</span><span>
</span><span id="line-211"></span><span id="local-6989586621679109110"><span class="annot"><a href="Data.Conduino.html#runPipePure"><span class="hs-identifier hs-type">runPipePure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="annot"><a href="#local-6989586621679109110"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109110"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-212"></span><span id="runPipePure"><span class="annot"><span class="annottext">runPipePure :: Pipe () Void Void Identity a -&gt; a
</span><a href="Data.Conduino.html#runPipePure"><span class="hs-identifier hs-var hs-var">runPipePure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity a -&gt; a
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var hs-var">runIdentity</span></span><span> </span><span class="annot"><span class="annottext">(Identity a -&gt; a)
-&gt; (Pipe () Void Void Identity a -&gt; Identity a)
-&gt; Pipe () Void Void Identity a
-&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pipe () Void Void Identity a -&gt; Identity a
forall (m :: * -&gt; *) u a. Monad m =&gt; Pipe () Void u m a -&gt; m a
</span><a href="Data.Conduino.html#runPipe"><span class="hs-identifier hs-var">runPipe</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Repeatedly run 'squeezePipe' by giving it items from an input list.</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- Returns the outputs observed, and 'Left' if the input list was exhausted</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- with more input expected, or 'Right' if the pipe terminated, with the</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- leftover inputs and output result.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-220"></span><span id="local-6989586621679109104"><span id="local-6989586621679109105"><span id="local-6989586621679109106"><span id="local-6989586621679109107"><span id="local-6989586621679109108"><span class="annot"><a href="Data.Conduino.html#feedPipe"><span class="hs-identifier hs-type">feedPipe</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109108"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109107"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">]</span><span>                      </span><span class="hs-comment">-- ^ input to feed in</span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109107"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109106"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109105"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109108"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109104"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109108"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109106"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109107"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109107"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109106"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109105"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109108"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109104"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109107"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679109104"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-225"></span><span id="feedPipe"><span class="annot"><span class="annottext">feedPipe :: [i]
-&gt; Pipe i o u m a -&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
</span><a href="Data.Conduino.html#feedPipe"><span class="hs-identifier hs-var hs-var">feedPipe</span></a></span></span><span> </span><span id="local-6989586621679109103"><span class="annot"><span class="annottext">xs :: [i]
</span><a href="#local-6989586621679109103"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
 -&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
  -&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
 -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
 -&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
-&gt; (((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
    -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
    -&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
-&gt; ((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either (Either u i -&gt; Pipe i o u m a) ([i], a)
 -&gt; Either (i -&gt; Pipe i o u m a) ([i], a))
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">((Either (Either u i -&gt; Pipe i o u m a) ([i], a)
  -&gt; Either (i -&gt; Pipe i o u m a) ([i], a))
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
 -&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
-&gt; (((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
    -&gt; Either (Either u i -&gt; Pipe i o u m a) ([i], a)
    -&gt; Either (i -&gt; Pipe i o u m a) ([i], a))
-&gt; ((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; Either (Either u i -&gt; Pipe i o u m a) ([i], a)
-&gt; Either (i -&gt; Pipe i o u m a) ([i], a)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either u i -&gt; Pipe i o u m a)
-&gt; (i -&gt; Either u i) -&gt; i -&gt; Pipe i o u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; Either u i
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>            </span><span class="annot"><span class="annottext">(m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
 -&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a)))
-&gt; (Pipe i o u m a
    -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a)))
-&gt; Pipe i o u m a
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) ([i], a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[i]
-&gt; Pipe i o u m a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (m :: * -&gt; *) i o u a.
Monad m =&gt;
[i]
-&gt; Pipe i o u m a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
</span><a href="Data.Conduino.html#feedPipeEither"><span class="hs-identifier hs-var">feedPipeEither</span></a></span><span> </span><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621679109103"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Repeatedly run 'squeezePipeEither' by giving it items from an input</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- list.  Returns the outputs observed, and 'Left' if the input list was</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- exhausted with more input expected (or a @u@ terminating upstream</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- value), or 'Right' if the pipe terminated, with the leftover inputs and</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- output result.</span><span>
</span><span id="line-233"></span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-235"></span><span id="local-6989586621679109591"><span id="local-6989586621679109592"><span id="local-6989586621679109593"><span id="local-6989586621679109594"><span id="local-6989586621679109595"><span class="annot"><a href="Data.Conduino.html#feedPipeEither"><span class="hs-identifier hs-type">feedPipeEither</span></a></span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109595"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109594"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">]</span><span>                      </span><span class="hs-comment">-- ^ input to feed in</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109594"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109593"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109592"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109595"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109591"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109595"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109593"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679109592"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109594"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109594"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109593"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109592"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109595"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109591"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109594"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679109591"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-240"></span><span id="feedPipeEither"><span class="annot"><span class="annottext">feedPipeEither :: [i]
-&gt; Pipe i o u m a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
</span><a href="Data.Conduino.html#feedPipeEither"><span class="hs-identifier hs-var hs-var">feedPipeEither</span></a></span></span><span> </span><span id="local-6989586621679109100"><span class="annot"><span class="annottext">xs :: [i]
</span><a href="#local-6989586621679109100"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679109099"><span class="annot"><span class="annottext">p :: Pipe i o u m a
</span><a href="#local-6989586621679109099"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679109098"><span class="annot"><span class="annottext">zs :: [o]
</span><a href="#local-6989586621679109098"><span class="hs-identifier hs-var">zs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679109097"><span class="annot"><span class="annottext">r :: Either (Either u i -&gt; Pipe i o u m a) a
</span><a href="#local-6989586621679109097"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (m :: * -&gt; *) i o u a.
Monad m =&gt;
Pipe i o u m a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="Data.Conduino.html#squeezePipeEither"><span class="hs-identifier hs-var">squeezePipeEither</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m a
</span><a href="#local-6989586621679109099"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (Either u i -&gt; Pipe i o u m a) a
</span><a href="#local-6989586621679109097"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679109096"><span class="annot"><span class="annottext">n :: Either u i -&gt; Pipe i o u m a
</span><a href="#local-6989586621679109096"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621679109100"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-244"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[o]
</span><a href="#local-6989586621679109098"><span class="hs-identifier hs-var">zs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Either u i -&gt; Pipe i o u m a)
-&gt; Either (Either u i -&gt; Pipe i o u m a) ([i], a)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Either u i -&gt; Pipe i o u m a
</span><a href="#local-6989586621679109096"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>        </span><span id="local-6989586621679109095"><span class="annot"><span class="annottext">y :: i
</span><a href="#local-6989586621679109095"><span class="hs-identifier hs-var">y</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679109094"><span class="annot"><span class="annottext">ys :: [i]
</span><a href="#local-6989586621679109094"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([o] -&gt; [o])
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[o]
</span><a href="#local-6989586621679109098"><span class="hs-identifier hs-var">zs</span></a></span><span> </span><span class="annot"><span class="annottext">[o] -&gt; [o] -&gt; [o]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a)))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[i]
-&gt; Pipe i o u m a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (m :: * -&gt; *) i o u a.
Monad m =&gt;
[i]
-&gt; Pipe i o u m a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
</span><a href="Data.Conduino.html#feedPipeEither"><span class="hs-identifier hs-var">feedPipeEither</span></a></span><span> </span><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621679109094"><span class="hs-identifier hs-var">ys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either u i -&gt; Pipe i o u m a
</span><a href="#local-6989586621679109096"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; Either u i
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679109095"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679109093"><span class="annot"><span class="annottext">z :: a
</span><a href="#local-6989586621679109093"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) ([i], a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[o]
</span><a href="#local-6989586621679109098"><span class="hs-identifier hs-var">zs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">([i], a) -&gt; Either (Either u i -&gt; Pipe i o u m a) ([i], a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621679109100"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679109093"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | &quot;Squeeze&quot; a pipe by extracting all output that can be extracted</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- before any input is requested.  Returns a 'Left' if the pipe eventually</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- does request input (as a continuation on the new input), or a 'Right' if</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- the pipe terminates with a value before ever asking for input.</span><span>
</span><span id="line-252"></span><span class="hs-comment">--</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-254"></span><span id="local-6989586621679109088"><span id="local-6989586621679109089"><span id="local-6989586621679109090"><span id="local-6989586621679109091"><span id="local-6989586621679109092"><span class="annot"><a href="Data.Conduino.html#squeezePipe"><span class="hs-identifier hs-type">squeezePipe</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109092"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109091"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109090"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109089"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109088"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109090"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109091"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109091"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109090"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109089"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109088"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109088"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-258"></span><span id="squeezePipe"><span class="annot"><span class="annottext">squeezePipe :: Pipe i o u m a -&gt; m ([o], Either (i -&gt; Pipe i o u m a) a)
</span><a href="Data.Conduino.html#squeezePipe"><span class="hs-identifier hs-var hs-var">squeezePipe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; ([o], Either (i -&gt; Pipe i o u m a) a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((([o], Either (Either u i -&gt; Pipe i o u m a) a)
  -&gt; ([o], Either (i -&gt; Pipe i o u m a) a))
 -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; m ([o], Either (i -&gt; Pipe i o u m a) a))
-&gt; (((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
    -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
    -&gt; ([o], Either (i -&gt; Pipe i o u m a) a))
-&gt; ((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either (Either u i -&gt; Pipe i o u m a) a
 -&gt; Either (i -&gt; Pipe i o u m a) a)
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; ([o], Either (i -&gt; Pipe i o u m a) a)
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">((Either (Either u i -&gt; Pipe i o u m a) a
  -&gt; Either (i -&gt; Pipe i o u m a) a)
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; ([o], Either (i -&gt; Pipe i o u m a) a))
-&gt; (((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
    -&gt; Either (Either u i -&gt; Pipe i o u m a) a
    -&gt; Either (i -&gt; Pipe i o u m a) a)
-&gt; ((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; ([o], Either (i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Either u i -&gt; Pipe i o u m a) -&gt; i -&gt; Pipe i o u m a)
-&gt; Either (Either u i -&gt; Pipe i o u m a) a
-&gt; Either (i -&gt; Pipe i o u m a) a
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either u i -&gt; Pipe i o u m a)
-&gt; (i -&gt; Either u i) -&gt; i -&gt; Pipe i o u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; Either u i
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>            </span><span class="annot"><span class="annottext">(m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; m ([o], Either (i -&gt; Pipe i o u m a) a))
-&gt; (Pipe i o u m a
    -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; Pipe i o u m a
-&gt; m ([o], Either (i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (m :: * -&gt; *) i o u a.
Monad m =&gt;
Pipe i o u m a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="Data.Conduino.html#squeezePipeEither"><span class="hs-identifier hs-var">squeezePipeEither</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- | &quot;Squeeze&quot; a pipe by extracting all output that can be extracted before</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- any input is requested.  Returns a 'Left' if the pipe eventually does</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- request input (as a continuation on the new input, or a terminating @u@</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- value), or a 'Right' if the pipe terminates with a value before ever</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- asking for input.</span><span>
</span><span id="line-266"></span><span class="hs-comment">--</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-268"></span><span id="local-6989586621679109581"><span id="local-6989586621679109582"><span id="local-6989586621679109583"><span id="local-6989586621679109584"><span id="local-6989586621679109585"><span class="annot"><a href="Data.Conduino.html#squeezePipeEither"><span class="hs-identifier hs-type">squeezePipeEither</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109585"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109584"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109583"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109582"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109585"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109581"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109585"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679109583"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679109582"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109584"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109584"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109583"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109582"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109585"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109581"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109581"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-272"></span><span id="squeezePipeEither"><span class="annot"><span class="annottext">squeezePipeEither :: Pipe i o u m a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="Data.Conduino.html#squeezePipeEither"><span class="hs-identifier hs-var hs-var">squeezePipeEither</span></a></span></span><span> </span><span id="local-6989586621679109087"><span class="annot"><span class="annottext">p :: Pipe i o u m a
</span><a href="#local-6989586621679109087"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF i o u) m a
-&gt; (a -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (forall x.
    (x -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
    -&gt; PipeF i o u x
    -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FT f m a
-&gt; forall r.
   (a -&gt; m r) -&gt; (forall x. (x -&gt; m r) -&gt; f x -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var hs-var">runFT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe i o u m a -&gt; FT (PipeF i o u) m a
forall i o u (m :: * -&gt; *) a.
Pipe i o u m a -&gt; FT (PipeF i o u) m a
</span><a href="Data.Conduino.Internal.html#pipeFree"><span class="hs-identifier hs-var hs-var">pipeFree</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m a
</span><a href="#local-6989586621679109087"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (a -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; a
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (Either u i -&gt; Pipe i o u m a) a
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (a -&gt; Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; a
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either (Either u i -&gt; Pipe i o u m a) a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679109085"><span class="annot"><span class="annottext">pNext :: x -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="#local-6989586621679109085"><span class="hs-identifier hs-var">pNext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-275"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679109084"><span class="annot"><span class="annottext">f :: u -&gt; x
</span><a href="#local-6989586621679109084"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679109083"><span class="annot"><span class="annottext">g :: i -&gt; x
</span><a href="#local-6989586621679109083"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; ((Either u i -&gt; Pipe i o u m a)
    -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (Either u i -&gt; Pipe i o u m a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either (Either u i -&gt; Pipe i o u m a) a
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; ((Either u i -&gt; Pipe i o u m a)
    -&gt; Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; (Either u i -&gt; Pipe i o u m a)
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either u i -&gt; Pipe i o u m a)
-&gt; Either (Either u i -&gt; Pipe i o u m a) a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">((Either u i -&gt; Pipe i o u m a)
 -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (Either u i -&gt; Pipe i o u m a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([o], Either (Either u i -&gt; Pipe i o u m a) a) -&gt; Pipe i o u m a
forall (t :: * -&gt; *) o u i (m :: * -&gt; *) b.
Foldable t =&gt;
(t o, Either (Either u i -&gt; Pipe i o u m b) b) -&gt; Pipe i o u m b
</span><a href="#local-6989586621679109082"><span class="hs-identifier hs-var">unSqueeze</span></a></span><span> </span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) a) -&gt; Pipe i o u m a)
-&gt; Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; Pipe i o u m a
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; Pipe i o u m a)
-&gt; (Either u i
    -&gt; Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; Either u i
-&gt; Pipe i o u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (Either u i -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; Either u i
-&gt; Pipe i o u m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="#local-6989586621679109085"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; (Either u i -&gt; x)
-&gt; Either u i
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(u -&gt; x) -&gt; (i -&gt; x) -&gt; Either u i -&gt; x
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; x
</span><a href="#local-6989586621679109084"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">i -&gt; x
</span><a href="#local-6989586621679109083"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679109079"><span class="annot"><span class="annottext">o :: o
</span><a href="#local-6989586621679109079"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621679109078"><span class="annot"><span class="annottext">x :: x
</span><a href="#local-6989586621679109078"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([o] -&gt; [o])
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679109079"><span class="hs-identifier hs-var">o</span></a></span><span class="annot"><span class="annottext">o -&gt; [o] -&gt; [o]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([o], Either (Either u i -&gt; Pipe i o u m a) a)
 -&gt; ([o], Either (Either u i -&gt; Pipe i o u m a) a))
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
-&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m ([o], Either (Either u i -&gt; Pipe i o u m a) a)
</span><a href="#local-6989586621679109085"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679109078"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621679109082"><span class="annot"><span class="annottext">unSqueeze :: (t o, Either (Either u i -&gt; Pipe i o u m b) b) -&gt; Pipe i o u m b
</span><a href="#local-6989586621679109082"><span class="hs-identifier hs-var hs-var">unSqueeze</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679109077"><span class="annot"><span class="annottext">os :: t o
</span><a href="#local-6989586621679109077"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679109076"><span class="annot"><span class="annottext">nxt :: Either (Either u i -&gt; Pipe i o u m b) b
</span><a href="#local-6989586621679109076"><span class="hs-identifier hs-var">nxt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>      </span><span class="annot"><span class="annottext">(o -&gt; Pipe i o u m ()) -&gt; t o -&gt; Pipe i o u m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; Pipe i o u m ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="annot"><span class="annottext">t o
</span><a href="#local-6989586621679109077"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (Either u i -&gt; Pipe i o u m b) b
</span><a href="#local-6989586621679109076"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679109074"><span class="annot"><span class="annottext">f :: Either u i -&gt; Pipe i o u m b
</span><a href="#local-6989586621679109074"><span class="hs-identifier hs-var">f</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either u i -&gt; Pipe i o u m b
</span><a href="#local-6989586621679109074"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Either u i -&gt; Pipe i o u m b)
-&gt; Pipe i o u m (Either u i) -&gt; Pipe i o u m b
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Either u i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679109073"><span class="annot"><span class="annottext">a :: b
</span><a href="#local-6989586621679109073"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; Pipe i o u m b
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679109073"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | The main operator for chaining pipes together.  @pipe1 .| pipe2@ will</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- connect the output of @pipe1@ to the input of @pipe2@.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- &quot;Running&quot; a pipe will draw from @pipe2@, and if @pipe2@ ever asks for</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- input (with 'await' or something similar), it will block until @pipe1@</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- outputs something (or signals termination).</span><span>
</span><span id="line-291"></span><span class="hs-comment">--</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- The structure of a full pipeline usually looks like:</span><span>
</span><span id="line-293"></span><span class="hs-comment">--</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- 'runPipe' $ someSource</span><span>
</span><span id="line-296"></span><span class="hs-comment">--        '.|' somePipe</span><span>
</span><span id="line-297"></span><span class="hs-comment">--        .| someOtherPipe</span><span>
</span><span id="line-298"></span><span class="hs-comment">--        .| someSink</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-300"></span><span class="hs-comment">--</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- Where you route a source into a series of pipes, which eventually ends</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- up at a sink.  'runPipe' will then produce the result of that sink.</span><span>
</span><span id="line-303"></span><span id="local-6989586621679109486"><span id="local-6989586621679109487"><span id="local-6989586621679109488"><span id="local-6989586621679109489"><span id="local-6989586621679109490"><span id="local-6989586621679109491"><span id="local-6989586621679109492"><span class="annot"><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-type">(.|)</span></a></span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109492"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109491"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109490"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109489"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109488"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109490"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109487"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109488"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109486"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109491"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109487"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109489"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109486"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-308"></span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679109071"><span class="annot"><span class="annottext">p :: FT (PipeF a b u) m v
</span><a href="#local-6989586621679109071"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id=".%7C"><span class="annot"><span class="annottext">.| :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m r
</span><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-var hs-var">.|</span></a></span></span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679109070"><span class="annot"><span class="annottext">q :: FT (PipeF b c v) m r
</span><a href="#local-6989586621679109070"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF a c u) m r -&gt; Pipe a c u m r
forall i o u (m :: * -&gt; *) a.
FT (PipeF i o u) m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-var">Pipe</span></a></span><span> </span><span class="annot"><span class="annottext">(FT (PipeF a c u) m r -&gt; Pipe a c u m r)
-&gt; FT (PipeF a c u) m r -&gt; Pipe a c u m r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FreeT (PipeF a c u) m r -&gt; FT (PipeF a c u) m r
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
Monad m =&gt;
FreeT f m a -&gt; FT f m a
</span><span class="hs-identifier hs-var">toFT</span></span><span> </span><span class="annot"><span class="annottext">(FreeT (PipeF a c u) m r -&gt; FT (PipeF a c u) m r)
-&gt; FreeT (PipeF a c u) m r -&gt; FT (PipeF a c u) m r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; FreeT (PipeF a c u) m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-var">compPipe_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF a b u) m v -&gt; RecPipe a b u m v
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF a b u) m v
</span><a href="#local-6989586621679109071"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF b c v) m r -&gt; RecPipe b c v m r
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF b c v) m r
</span><a href="#local-6989586621679109070"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="annot"><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-type">.|</span></a></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="annot"><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-type">compPipe_</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679109529"><span class="annot"><a href="#local-6989586621679109529"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679109528"><span class="annot"><a href="#local-6989586621679109528"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679109525"><span class="annot"><a href="#local-6989586621679109525"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span id="local-6989586621679109527"><span class="annot"><a href="#local-6989586621679109527"><span class="hs-identifier hs-type">u</span></a></span></span><span> </span><span id="local-6989586621679109526"><span class="annot"><a href="#local-6989586621679109526"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679109530"><span class="annot"><a href="#local-6989586621679109530"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679109524"><span class="annot"><a href="#local-6989586621679109524"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109530"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109528"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109527"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109530"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109526"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109528"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109525"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109526"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109530"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109524"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109529"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109525"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109527"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109530"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109524"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-316"></span><span id="compPipe_"><span class="annot"><span class="annottext">compPipe_ :: RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-var hs-var">compPipe_</span></a></span></span><span> </span><span id="local-6989586621679109066"><span class="annot"><span class="annottext">p :: RecPipe a b u m v
</span><a href="#local-6989586621679109066"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679109065"><span class="annot"><span class="annottext">q :: RecPipe b c v m r
</span><a href="#local-6989586621679109065"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF a c u) r (RecPipe a c u m r)) -&gt; RecPipe a c u m r
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="annot"><span class="annottext">(m (FreeF (PipeF a c u) r (RecPipe a c u m r))
 -&gt; RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
-&gt; RecPipe a c u m r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe b c v m r -&gt; m (FreeF (PipeF b c v) r (RecPipe b c v m r))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe b c v m r
</span><a href="#local-6989586621679109065"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF b c v) r (RecPipe b c v m r))
-&gt; (FreeF (PipeF b c v) r (RecPipe b c v m r)
    -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679109062"><span class="annot"><span class="annottext">qq :: FreeF (PipeF b c v) r (RecPipe b c v m r)
</span><a href="#local-6989586621679109062"><span class="hs-identifier hs-var">qq</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF b c v) r (RecPipe b c v m r)
</span><a href="#local-6989586621679109062"><span class="hs-identifier hs-var">qq</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679109060"><span class="annot"><span class="annottext">x :: r
</span><a href="#local-6989586621679109060"><span class="hs-identifier hs-var">x</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF a c u) r (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF a c u) r (RecPipe a c u m r)
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; (r -&gt; FreeF (PipeF a c u) r (RecPipe a c u m r))
-&gt; r
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; FreeF (PipeF a c u) r (RecPipe a c u m r)
forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Pure</span></span><span> </span><span class="annot"><span class="annottext">(r -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; r -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679109060"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679109058"><span class="annot"><span class="annottext">f :: v -&gt; RecPipe b c v m r
</span><a href="#local-6989586621679109058"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679109057"><span class="annot"><span class="annottext">g :: b -&gt; RecPipe b c v m r
</span><a href="#local-6989586621679109057"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; m (FreeF (PipeF a b u) v (RecPipe a b u m v))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v
</span><a href="#local-6989586621679109066"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF a b u) v (RecPipe a b u m v))
-&gt; (FreeF (PipeF a b u) v (RecPipe a b u m v)
    -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679109056"><span class="annot"><span class="annottext">pp :: FreeF (PipeF a b u) v (RecPipe a b u m v)
</span><a href="#local-6989586621679109056"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF a b u) v (RecPipe a b u m v)
</span><a href="#local-6989586621679109056"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-319"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679109055"><span class="annot"><span class="annottext">x' :: v
</span><a href="#local-6989586621679109055"><span class="hs-identifier hs-var">x'</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe a c u m r -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">(RecPipe a c u m r
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; RecPipe a c u m r
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-var">compPipe_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (FreeF (PipeF a b u) v (RecPipe a b u m v)) -&gt; RecPipe a b u m v
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF a b u) v (RecPipe a b u m v)
-&gt; m (FreeF (PipeF a b u) v (RecPipe a b u m v))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF a b u) v (RecPipe a b u m v)
</span><a href="#local-6989586621679109056"><span class="hs-identifier hs-var">pp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; RecPipe b c v m r
</span><a href="#local-6989586621679109058"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679109055"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679109054"><span class="annot"><span class="annottext">f' :: u -&gt; RecPipe a b u m v
</span><a href="#local-6989586621679109054"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621679109053"><span class="annot"><span class="annottext">g' :: a -&gt; RecPipe a b u m v
</span><a href="#local-6989586621679109053"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF a c u) r (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF a c u) r (RecPipe a c u m r)
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; (PipeF a c u (RecPipe a c u m r)
    -&gt; FreeF (PipeF a c u) r (RecPipe a c u m r))
-&gt; PipeF a c u (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PipeF a c u (RecPipe a c u m r)
-&gt; FreeF (PipeF a c u) r (RecPipe a c u m r)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF a c u (RecPipe a c u m r)
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; PipeF a c u (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(u -&gt; RecPipe a c u m r)
-&gt; (a -&gt; RecPipe a c u m r) -&gt; PipeF a c u (RecPipe a c u m r)
forall i o u a. (u -&gt; a) -&gt; (i -&gt; a) -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-var">PAwaitF</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-operator hs-var">`compPipe_`</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF b c v) r (RecPipe b c v m r)) -&gt; RecPipe b c v m r
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF b c v) r (RecPipe b c v m r)
-&gt; m (FreeF (PipeF b c v) r (RecPipe b c v m r))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF b c v) r (RecPipe b c v m r)
</span><a href="#local-6989586621679109062"><span class="hs-identifier hs-var">qq</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe a b u m v -&gt; RecPipe a c u m r)
-&gt; (u -&gt; RecPipe a b u m v) -&gt; u -&gt; RecPipe a c u m r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe a b u m v
</span><a href="#local-6989586621679109054"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>                                                    </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-operator hs-var">`compPipe_`</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF b c v) r (RecPipe b c v m r)) -&gt; RecPipe b c v m r
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF b c v) r (RecPipe b c v m r)
-&gt; m (FreeF (PipeF b c v) r (RecPipe b c v m r))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF b c v) r (RecPipe b c v m r)
</span><a href="#local-6989586621679109062"><span class="hs-identifier hs-var">qq</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe a b u m v -&gt; RecPipe a c u m r)
-&gt; (a -&gt; RecPipe a b u m v) -&gt; a -&gt; RecPipe a c u m r
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RecPipe a b u m v
</span><a href="#local-6989586621679109053"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679109052"><span class="annot"><span class="annottext">x' :: b
</span><a href="#local-6989586621679109052"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621679109051"><span class="annot"><span class="annottext">y' :: RecPipe a b u m v
</span><a href="#local-6989586621679109051"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe a c u m r -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">(RecPipe a c u m r
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; RecPipe a c u m r
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-var">compPipe_</span></a></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v
</span><a href="#local-6989586621679109051"><span class="hs-identifier hs-var">y'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; RecPipe b c v m r
</span><a href="#local-6989586621679109057"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679109052"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679109050"><span class="annot"><span class="annottext">x :: c
</span><a href="#local-6989586621679109050"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679109049"><span class="annot"><span class="annottext">y :: RecPipe b c v m r
</span><a href="#local-6989586621679109049"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF a c u) r (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF a c u) r (RecPipe a c u m r)
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; (PipeF a c u (RecPipe a c u m r)
    -&gt; FreeF (PipeF a c u) r (RecPipe a c u m r))
-&gt; PipeF a c u (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PipeF a c u (RecPipe a c u m r)
-&gt; FreeF (PipeF a c u) r (RecPipe a c u m r)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF a c u (RecPipe a c u m r)
 -&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r)))
-&gt; PipeF a c u (RecPipe a c u m r)
-&gt; m (FreeF (PipeF a c u) r (RecPipe a c u m r))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">c -&gt; RecPipe a c u m r -&gt; PipeF a c u (RecPipe a c u m r)
forall i o u a. o -&gt; a -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-var">PYieldF</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679109050"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
forall a b c u v (m :: * -&gt; *) r.
Monad m =&gt;
RecPipe a b u m v -&gt; RecPipe b c v m r -&gt; RecPipe a c u m r
</span><a href="Data.Conduino.html#compPipe_"><span class="hs-identifier hs-var">compPipe_</span></a></span><span> </span><span class="annot"><span class="annottext">RecPipe a b u m v
</span><a href="#local-6989586621679109066"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">RecPipe b c v m r
</span><a href="#local-6989586621679109049"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">-- | Useful prefix version of '&amp;|'.</span><span>
</span><span id="line-326"></span><span class="hs-comment">--</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-328"></span><span id="local-6989586621679109449"><span id="local-6989586621679109450"><span id="local-6989586621679109451"><span id="local-6989586621679109452"><span id="local-6989586621679109453"><span id="local-6989586621679109454"><span id="local-6989586621679109455"><span class="annot"><a href="Data.Conduino.html#fuseBoth"><span class="hs-identifier hs-type">fuseBoth</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109455"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109454"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109453"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109452"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109455"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109451"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109453"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109450"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109451"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109455"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109449"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109454"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109450"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109452"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109455"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109451"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679109449"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-333"></span><span id="fuseBoth"><span class="annot"><span class="annottext">fuseBoth :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
</span><a href="Data.Conduino.html#fuseBoth"><span class="hs-identifier hs-var hs-var">fuseBoth</span></a></span></span><span> </span><span id="local-6989586621679109048"><span class="annot"><span class="annottext">p :: Pipe a b u m v
</span><a href="#local-6989586621679109048"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679109047"><span class="annot"><span class="annottext">q :: Pipe b c v m r
</span><a href="#local-6989586621679109047"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v
</span><a href="#local-6989586621679109048"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-334"></span><span>            </span><span class="annot"><span class="annottext">Pipe a b u m v -&gt; Pipe b c v m (v, r) -&gt; Pipe a c u m (v, r)
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m r
</span><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-var">.|</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe b c v m r
</span><a href="#local-6989586621679109047"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe b c v m r -&gt; (r -&gt; Pipe b c v m (v, r)) -&gt; Pipe b c v m (v, r)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; Pipe b c v m (v, r)
forall b i o a (m :: * -&gt; *). b -&gt; Pipe i o a m (a, b)
</span><a href="#local-6989586621679109046"><span class="hs-identifier hs-var">exhaust</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679109046"><span class="annot"><span class="annottext">exhaust :: b -&gt; Pipe i o a m (a, b)
</span><a href="#local-6989586621679109046"><span class="hs-identifier hs-var hs-var">exhaust</span></a></span></span><span> </span><span id="local-6989586621679109045"><span class="annot"><span class="annottext">x :: b
</span><a href="#local-6989586621679109045"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o a m (a, b)
forall i o a (m :: * -&gt; *). Pipe i o a m (a, b)
</span><a href="#local-6989586621679109044"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-337"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>        </span><span id="local-6989586621679109044"><span class="annot"><span class="annottext">go :: Pipe i o a m (a, b)
</span><a href="#local-6989586621679109044"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o a m (Either a i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o a m (Either a i)
-&gt; (Either a i -&gt; Pipe i o a m (a, b)) -&gt; Pipe i o a m (a, b)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-339"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span>  </span><span id="local-6989586621679109043"><span class="annot"><span class="annottext">y :: a
</span><a href="#local-6989586621679109043"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, b) -&gt; Pipe i o a m (a, b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679109043"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679109045"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pipe i o a m (a, b)
</span><a href="#local-6989586621679109044"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | Like 'fuseBoth' and '&amp;|', except does not wait for the upstream pipe</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- to terminate.  Return 'Nothing' in the first field if the upstream pipe hasn't terminated,</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- and 'Just' if it has, with the terminating value.</span><span>
</span><span id="line-345"></span><span class="hs-comment">--</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-347"></span><span id="local-6989586621679109036"><span id="local-6989586621679109037"><span id="local-6989586621679109038"><span id="local-6989586621679109039"><span id="local-6989586621679109040"><span id="local-6989586621679109041"><span id="local-6989586621679109042"><span class="annot"><a href="Data.Conduino.html#fuseBothMaybe"><span class="hs-identifier hs-type">fuseBothMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109042"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109041"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109040"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109039"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109042"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109038"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109040"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109037"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109038"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109042"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109036"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109041"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109037"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109039"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109042"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679109038"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679109036"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-348"></span><span id="fuseBothMaybe"><span class="annot"><span class="annottext">fuseBothMaybe :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (Maybe v, r)
</span><a href="Data.Conduino.html#fuseBothMaybe"><span class="hs-identifier hs-var hs-var">fuseBothMaybe</span></a></span></span><span> </span><span id="local-6989586621679109035"><span class="annot"><span class="annottext">p :: Pipe a b u m v
</span><a href="#local-6989586621679109035"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679109034"><span class="annot"><span class="annottext">q :: Pipe b c v m r
</span><a href="#local-6989586621679109034"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v
</span><a href="#local-6989586621679109035"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-349"></span><span>                 </span><span class="annot"><span class="annottext">Pipe a b u m v
-&gt; Pipe b c v m (Maybe v, r) -&gt; Pipe a c u m (Maybe v, r)
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m r
</span><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-var">.|</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe b c v m r
</span><a href="#local-6989586621679109034"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe b c v m r
-&gt; (r -&gt; Pipe b c v m (Maybe v, r)) -&gt; Pipe b c v m (Maybe v, r)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; Pipe b c v m (Maybe v, r)
forall t b o a (m :: * -&gt; *). t -&gt; Pipe b o a m (Maybe a, t)
</span><a href="#local-6989586621679109033"><span class="hs-identifier hs-var">check</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-351"></span><span>    </span><span id="local-6989586621679109033"><span class="annot"><span class="annottext">check :: t -&gt; Pipe b o a m (Maybe a, t)
</span><a href="#local-6989586621679109033"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621679109032"><span class="annot"><span class="annottext">x :: t
</span><a href="#local-6989586621679109032"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679109032"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; (Maybe a, t))
-&gt; (Either a b -&gt; Maybe a) -&gt; Either a b -&gt; (Maybe a, t)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe a) -&gt; (b -&gt; Maybe a) -&gt; Either a b -&gt; Maybe a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a -&gt; b -&gt; Maybe a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either a b -&gt; (Maybe a, t))
-&gt; Pipe b o a m (Either a b) -&gt; Pipe b o a m (Maybe a, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe b o a m (Either a b)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | Useful prefix version of '|.'.</span><span>
</span><span id="line-354"></span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-356"></span><span id="local-6989586621679109428"><span id="local-6989586621679109429"><span id="local-6989586621679109430"><span id="local-6989586621679109431"><span id="local-6989586621679109432"><span id="local-6989586621679109433"><span id="local-6989586621679109434"><span class="annot"><a href="Data.Conduino.html#fuseUpstream"><span class="hs-identifier hs-type">fuseUpstream</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109434"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109432"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109431"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109430"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109432"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109429"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109430"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109428"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109429"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109431"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109430"><span class="hs-identifier hs-type">v</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-361"></span><span id="fuseUpstream"><span class="annot"><span class="annottext">fuseUpstream :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m v
</span><a href="Data.Conduino.html#fuseUpstream"><span class="hs-identifier hs-var hs-var">fuseUpstream</span></a></span></span><span> </span><span id="local-6989586621679109031"><span class="annot"><span class="annottext">p :: Pipe a b u m v
</span><a href="#local-6989586621679109031"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679109030"><span class="annot"><span class="annottext">q :: Pipe b c v m r
</span><a href="#local-6989586621679109030"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v, r) -&gt; v
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((v, r) -&gt; v) -&gt; Pipe a c u m (v, r) -&gt; Pipe a c u m v
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
</span><a href="Data.Conduino.html#fuseBoth"><span class="hs-identifier hs-var">fuseBoth</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v
</span><a href="#local-6989586621679109031"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe b c v m r
</span><a href="#local-6989586621679109030"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-comment">-- | Like @.|@, but get the result of /both/ pipes on termination, instead</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- of just the second.  This means that @p &amp;| q@ will only terminate with a result when</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- /both/ @p@ and @q@ terminate.  (Typically, @p .| q@ would terminate as soon as</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- @q@ terminates.)</span><span>
</span><span id="line-367"></span><span class="hs-comment">--</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-369"></span><span id="local-6989586621679109023"><span id="local-6989586621679109024"><span id="local-6989586621679109025"><span id="local-6989586621679109026"><span id="local-6989586621679109027"><span id="local-6989586621679109028"><span id="local-6989586621679109029"><span class="annot"><a href="Data.Conduino.html#%26%7C"><span class="hs-operator hs-type">(&amp;|)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109029"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109028"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109027"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109026"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109029"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109025"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109027"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109024"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109025"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109029"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109023"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109028"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109024"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109026"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109029"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109025"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679109023"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-370"></span><span id="%26%7C"><span class="annot"><span class="annottext">&amp;| :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
</span><a href="Data.Conduino.html#%26%7C"><span class="hs-operator hs-var hs-var">(&amp;|)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m (v, r)
</span><a href="Data.Conduino.html#fuseBoth"><span class="hs-identifier hs-var">fuseBoth</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- | Like @.|@, but keep the result of the /first/ pipe, instead of the</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- second.  This means that @p |. q@ will only terminate with a result when</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- /both/ @p@ and @q@ terminate.  (Typically, @p .| q@ would terminate as soon as</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- @q@ terminates.)</span><span>
</span><span id="line-376"></span><span class="hs-comment">--</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-378"></span><span id="local-6989586621679109016"><span id="local-6989586621679109017"><span id="local-6989586621679109018"><span id="local-6989586621679109019"><span id="local-6989586621679109020"><span id="local-6989586621679109021"><span id="local-6989586621679109022"><span class="annot"><a href="Data.Conduino.html#%7C."><span class="hs-operator hs-type">(|.)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109022"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109021"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109020"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109019"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109022"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109018"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109020"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109017"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109018"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109022"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109016"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109021"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109017"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109019"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109022"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109018"><span class="hs-identifier hs-type">v</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-379"></span><span id="%7C."><span class="annot"><span class="annottext">|. :: Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m v
</span><a href="Data.Conduino.html#%7C."><span class="hs-operator hs-var hs-var">(|.)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m v
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m v
</span><a href="Data.Conduino.html#fuseUpstream"><span class="hs-identifier hs-var">fuseUpstream</span></a></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="annot"><a href="Data.Conduino.html#%26%7C"><span class="hs-operator hs-type">&amp;|</span></a></span><span>
</span><span id="line-382"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="annot"><a href="Data.Conduino.html#%7C."><span class="hs-operator hs-type">|.</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-comment">-- | Loop a pipe into itself.</span><span>
</span><span id="line-385"></span><span class="hs-comment">--</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- *  Will feed all output back to the input</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- *  Will only ask for input upstream if output is stalled.</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- *  Yields all outputted values downstream, effectively duplicating them.</span><span>
</span><span id="line-389"></span><span class="hs-comment">--</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-391"></span><span id="local-6989586621679109012"><span id="local-6989586621679109013"><span id="local-6989586621679109014"><span id="local-6989586621679109015"><span class="annot"><a href="Data.Conduino.html#feedbackPipe"><span class="hs-identifier hs-type">feedbackPipe</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109015"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109014"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109014"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109013"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109015"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109012"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109014"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109014"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109013"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109015"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109012"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-395"></span><span id="feedbackPipe"><span class="annot"><span class="annottext">feedbackPipe :: Pipe x x u m a -&gt; Pipe x x u m a
</span><a href="Data.Conduino.html#feedbackPipe"><span class="hs-identifier hs-var hs-var">feedbackPipe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe (Either x x) x u m a -&gt; Pipe x x u m a
forall (m :: * -&gt; *) i o u a.
Monad m =&gt;
Pipe (Either i o) o u m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.html#feedbackPipeEither"><span class="hs-identifier hs-var">feedbackPipeEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe (Either x x) x u m a -&gt; Pipe x x u m a)
-&gt; (Pipe x x u m a -&gt; Pipe (Either x x) x u m a)
-&gt; Pipe x x u m a
-&gt; Pipe x x u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either x x -&gt; x) -&gt; Pipe x x u m a -&gt; Pipe (Either x x) x u m a
forall i j o u (m :: * -&gt; *) a.
(i -&gt; j) -&gt; Pipe j o u m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#mapInput"><span class="hs-identifier hs-var">mapInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(x -&gt; x) -&gt; (x -&gt; x) -&gt; Either x x -&gt; x
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; x
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; x
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-comment">-- | A version of 'feedbackPipe' that distinguishes upstream input from</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- downstream output fed back.  Gets 'Left' from upstream, and 'Right' from</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- its own output.</span><span>
</span><span id="line-400"></span><span class="hs-comment">--</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- *  Will feed all output back to the input</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- *  Will only ask for input upstream if output is stalled.</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- *  Yields all outputted values downstream, effectively duplicating them.</span><span>
</span><span id="line-404"></span><span class="hs-comment">--</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- @since 0.2.2.0</span><span>
</span><span id="line-406"></span><span id="local-6989586621679109419"><span id="local-6989586621679109420"><span id="local-6989586621679109421"><span id="local-6989586621679109422"><span id="local-6989586621679109423"><span class="annot"><a href="Data.Conduino.html#feedbackPipeEither"><span class="hs-identifier hs-type">feedbackPipeEither</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109423"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-408"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679109422"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109421"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109421"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109420"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109419"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-409"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109422"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109421"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109420"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109419"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-410"></span><span id="feedbackPipeEither"><span class="annot"><span class="annottext">feedbackPipeEither :: Pipe (Either i o) o u m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.html#feedbackPipeEither"><span class="hs-identifier hs-var hs-var">feedbackPipeEither</span></a></span></span><span> </span><span id="local-6989586621679109011"><span class="annot"><span class="annottext">p :: Pipe (Either i o) o u m a
</span><a href="#local-6989586621679109011"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, Seq o) -&gt; a) -&gt; Pipe i o u m (a, Seq o) -&gt; Pipe i o u m a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(a, Seq o) -&gt; a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(Pipe i o u m (a, Seq o) -&gt; Pipe i o u m a)
-&gt; (Pipe i o u (StateT (Seq o) m) a -&gt; Pipe i o u m (a, Seq o))
-&gt; Pipe i o u (StateT (Seq o) m) a
-&gt; Pipe i o u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Seq o -&gt; Pipe i o u (StateT (Seq o) m) a -&gt; Pipe i o u m (a, Seq o)
forall (m :: * -&gt; *) s i o u a.
Monad m =&gt;
s -&gt; Pipe i o u (StateT s m) a -&gt; Pipe i o u m (a, s)
</span><a href="Data.Conduino.Internal.html#runStateP"><span class="hs-identifier hs-var">runStateP</span></a></span><span> </span><span class="annot"><span class="annottext">Seq o
forall a. Seq a
</span><span class="hs-identifier hs-var">Seq.empty</span></span><span> </span><span class="annot"><span class="annottext">(Pipe i o u (StateT (Seq o) m) a -&gt; Pipe i o u m a)
-&gt; Pipe i o u (StateT (Seq o) m) a -&gt; Pipe i o u m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-411"></span><span>       </span><span class="annot"><span class="annottext">Pipe i (Either i o) u (StateT (Seq o) m) u
forall a b b. Pipe a (Either a b) b (StateT (Seq b) m) b
</span><a href="#local-6989586621679109008"><span class="hs-identifier hs-var">popper</span></a></span><span>
</span><span id="line-412"></span><span>    </span><span class="annot"><span class="annottext">Pipe i (Either i o) u (StateT (Seq o) m) u
-&gt; Pipe (Either i o) o u (StateT (Seq o) m) a
-&gt; Pipe i o u (StateT (Seq o) m) a
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m r
</span><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-var">.|</span></a></span><span> </span><span class="annot"><span class="annottext">(forall x. m x -&gt; StateT (Seq o) m x)
-&gt; Pipe (Either i o) o u m a
-&gt; Pipe (Either i o) o u (StateT (Seq o) m) a
forall (m :: * -&gt; *) (n :: * -&gt; *) i o u a.
(Monad m, Monad n) =&gt;
(forall x. m x -&gt; n x) -&gt; Pipe i o u m a -&gt; Pipe i o u n a
</span><a href="Data.Conduino.Internal.html#hoistPipe"><span class="hs-identifier hs-var">hoistPipe</span></a></span><span> </span><span class="annot"><span class="annottext">forall x. m x -&gt; StateT (Seq o) m x
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">Pipe (Either i o) o u m a
</span><a href="#local-6989586621679109011"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-413"></span><span>    </span><span class="annot"><span class="annottext">Pipe (Either i o) o u (StateT (Seq o) m) a
-&gt; Pipe o o a (StateT (Seq o) m) a
-&gt; Pipe (Either i o) o u (StateT (Seq o) m) a
forall (m :: * -&gt; *) a b u v c r.
Monad m =&gt;
Pipe a b u m v -&gt; Pipe b c v m r -&gt; Pipe a c u m r
</span><a href="Data.Conduino.html#.%7C"><span class="hs-operator hs-var">.|</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; Pipe o o a (StateT (Seq o) m) ())
-&gt; Pipe o o a (StateT (Seq o) m) a
forall i o u (m :: * -&gt; *) a.
(i -&gt; Pipe i o u m a) -&gt; Pipe i o u m u
</span><a href="Data.Conduino.html#awaitForever"><span class="hs-identifier hs-var">awaitForever</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679109007"><span class="annot"><span class="annottext">x :: o
</span><a href="#local-6989586621679109007"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StateT (Seq o) m () -&gt; Pipe o o a (StateT (Seq o) m) ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Seq o -&gt; Seq o) -&gt; StateT (Seq o) m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq o -&gt; o -&gt; Seq o
forall a. Seq a -&gt; a -&gt; Seq a
</span><span class="hs-operator hs-var">:|&gt;</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679109007"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pipe o o a (StateT (Seq o) m) ()
-&gt; Pipe o o a (StateT (Seq o) m) ()
-&gt; Pipe o o a (StateT (Seq o) m) ()
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; Pipe o o a (StateT (Seq o) m) ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679109007"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621679109008"><span class="annot"><span class="annottext">popper :: Pipe a (Either a b) b (StateT (Seq b) m) b
</span><a href="#local-6989586621679109008"><span class="hs-identifier hs-var hs-var">popper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT (Seq b) m (Seq b)
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) (Seq b)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">StateT (Seq b) m (Seq b)
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) (Seq b)
-&gt; (Seq b -&gt; Pipe a (Either a b) b (StateT (Seq b) m) b)
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-416"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Empty</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) (Either b a)
forall i o u (m :: * -&gt; *). Pipe i o u m (Either u i)
</span><a href="Data.Conduino.Internal.html#awaitEither"><span class="hs-identifier hs-var">awaitEither</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) (Either b a)
-&gt; (Either b a -&gt; Pipe a (Either a b) b (StateT (Seq b) m) b)
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-417"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679109002"><span class="annot"><span class="annottext">r :: b
</span><a href="#local-6989586621679109002"><span class="hs-identifier hs-var">r</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; Pipe a (Either a b) b (StateT (Seq b) m) b
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679109002"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-418"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679109001"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621679109001"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either a b -&gt; Pipe a (Either a b) b (StateT (Seq b) m) ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Either a b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679109001"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) ()
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) b
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) b
</span><a href="#local-6989586621679109008"><span class="hs-identifier hs-var">popper</span></a></span><span>
</span><span id="line-419"></span><span>      </span><span id="local-6989586621679109000"><span class="annot"><span class="annottext">x :: b
</span><a href="#local-6989586621679109000"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&lt;|</span></span><span> </span><span id="local-6989586621679108998"><span class="annot"><span class="annottext">xs :: Seq b
</span><a href="#local-6989586621679108998"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-420"></span><span>        </span><span class="annot"><span class="annottext">StateT (Seq b) m () -&gt; Pipe a (Either a b) b (StateT (Seq b) m) ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(StateT (Seq b) m ()
 -&gt; Pipe a (Either a b) b (StateT (Seq b) m) ())
-&gt; StateT (Seq b) m ()
-&gt; Pipe a (Either a b) b (StateT (Seq b) m) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Seq b -&gt; StateT (Seq b) m ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Seq b
</span><a href="#local-6989586621679108998"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-421"></span><span>        </span><span class="annot"><span class="annottext">Either a b -&gt; Pipe a (Either a b) b (StateT (Seq b) m) ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Either a b
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679109000"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>        </span><span class="annot"><span class="annottext">Pipe a (Either a b) b (StateT (Seq b) m) b
</span><a href="#local-6989586621679109008"><span class="hs-identifier hs-var">popper</span></a></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="hs-comment">-- | A newtype wrapper over a source (@'Pipe' () o 'Void'@) that gives it an</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- alternative 'Applicative' and 'Alternative' instance, matching &quot;ListT</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- done right&quot;.</span><span>
</span><span id="line-427"></span><span class="hs-comment">--</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- '&lt;*&gt;' will pair up each output that the sources produce: if you 'await'</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- a value from downstream, it will wait until both paired sources yield</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- before passing them on together.</span><span>
</span><span id="line-431"></span><span class="hs-comment">--</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- '&lt;|&gt;' will completely exhaust the first source before moving on to the</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- next source.</span><span>
</span><span id="line-434"></span><span class="hs-comment">--</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- 'ZipSource' is effectively equivalent to &quot;ListT done right&quot;, the true</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- List Monad transformer.  '&lt;|&gt;' is concatentation.  You can use this type</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- with 'lift' to lift a yielding action and '&lt;|&gt;' to sequence yields to</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- implement the pattern described in</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- &lt;http://www.haskellforall.com/2014/11/how-to-build-library-agnostic-streaming.html&gt;,</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- where you can write streaming producers in a polymorphic way, and have</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- it run with pipes, conduit, etc.</span><span>
</span><span id="line-442"></span><span class="hs-comment">--</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- The main difference is that its 'Applicative' instance (&quot;zipping&quot;) is</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- different from the traditional 'Applicative' instance for 'ListT'</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- (&quot;all combinations&quot;).  Effectively this becomes like a &quot;zipping&quot;</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- 'Applicative' instance for 'ListT'.</span><span>
</span><span id="line-447"></span><span class="hs-comment">--</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- If you want a 'Monad' (or 'Control.Monad.IO.Class.MonadIO') instance,</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- use 'ListT' instead, and convert using 'toListT'/'fromListT' or the</span><span>
</span><span id="line-450"></span><span class="hs-comment">-- 'PipeList' pattern/constructor.</span><span>
</span><span id="line-451"></span><span class="hs-keyword">newtype</span><span> </span><span id="ZipSource"><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span></span><span> </span><span id="local-6989586621679109356"><span class="annot"><a href="#local-6989586621679109356"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679109357"><span class="annot"><a href="#local-6989586621679109357"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ZipSource"><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getZipSource"><span class="annot"><span class="annottext">ZipSource m a -&gt; Pipe () a Void m ()
</span><a href="Data.Conduino.html#getZipSource"><span class="hs-identifier hs-var hs-var">getZipSource</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109357"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109356"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">-- | A source is equivalent to a 'ListT' producing a 'Maybe'; this pattern</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- synonym lets you treat it as such.  It essentialyl wraps over 'toListT'</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- and 'fromListT'.</span><span>
</span><span id="line-456"></span><span id="local-6989586621679109374"><span id="local-6989586621679109375"><span id="local-6989586621679109376"><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-type">PipeList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109376"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679109376"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679109375"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109374"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109376"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-457"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24bPipeList"><span id="%24mPipeList"><span id="PipeList"><span class="annot"><span class="annottext">$bPipeList :: ListT m (Maybe a) -&gt; Pipe () a u m ()
$mPipeList :: forall r (m :: * -&gt; *) a u.
Monad m =&gt;
Pipe () a u m () -&gt; (ListT m (Maybe a) -&gt; r) -&gt; (Void# -&gt; r) -&gt; r
</span><a href="Data.Conduino.html#%24bPipeList"><span class="hs-identifier hs-var hs-var hs-var hs-var">PipeList</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621679108992"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#toListT"><span class="hs-identifier hs-type">toListT</span></a></span><span class="hs-glyph">-&gt;</span><span id="local-6989586621679108992"><span class="annot"><a href="#local-6989586621679108992"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-459"></span><span>    </span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-var">PipeList</span></a></span><span> </span><span id="local-6989586621679108991"><span class="annot"><span class="annottext">xs :: ListT m (Maybe a)
</span><a href="#local-6989586621679108991"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; Pipe () a u m ()
forall (m :: * -&gt; *) o i u.
Monad m =&gt;
ListT m (Maybe o) -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.html#fromListT"><span class="hs-identifier hs-var">fromListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108991"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-460"></span><span class="hs-pragma">{-# COMPLETE</span><span> </span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-pragma hs-type">PipeList</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span id="local-6989586621679108990"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679108987"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108990"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-463"></span><span>    </span><span id="local-6989586621679108985"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; ZipSource m a -&gt; ZipSource m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679108984"><span class="annot"><span class="annottext">f :: a -&gt; b
</span><a href="#local-6989586621679108984"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () b Void m () -&gt; ZipSource m b
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () b Void m () -&gt; ZipSource m b)
-&gt; (ZipSource m a -&gt; Pipe () b Void m ())
-&gt; ZipSource m a
-&gt; ZipSource m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Pipe () a Void m () -&gt; Pipe () b Void m ()
forall p o i u (m :: * -&gt; *) a.
(p -&gt; o) -&gt; Pipe i p u m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#mapOutput"><span class="hs-identifier hs-var">mapOutput</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679108984"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () a Void m () -&gt; Pipe () b Void m ())
-&gt; (ZipSource m a -&gt; Pipe () a Void m ())
-&gt; ZipSource m a
-&gt; Pipe () b Void m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ZipSource m a -&gt; Pipe () a Void m ()
forall (m :: * -&gt; *) a. ZipSource m a -&gt; Pipe () a Void m ()
</span><a href="Data.Conduino.html#getZipSource"><span class="hs-identifier hs-var hs-var">getZipSource</span></a></span></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span id="local-6989586621679108983"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679108974"><span id="local-6989586621679108976"><span id="local-6989586621679108978"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679108983"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108983"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621679108972"><span class="annot"><span class="annottext">pure :: a -&gt; ZipSource m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; ZipSource m a
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () a Void m () -&gt; ZipSource m a)
-&gt; (a -&gt; Pipe () a Void m ()) -&gt; a -&gt; ZipSource m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Pipe () a Void m ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span>
</span><span id="line-467"></span><span>    </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span id="local-6989586621679108971"><span class="annot"><span class="annottext">p :: Pipe () (a -&gt; b) Void m ()
</span><a href="#local-6989586621679108971"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108970"><span class="annot"><span class="annottext">&lt;*&gt; :: ZipSource m (a -&gt; b) -&gt; ZipSource m a -&gt; ZipSource m b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span id="local-6989586621679108969"><span class="annot"><span class="annottext">q :: Pipe () a Void m ()
</span><a href="#local-6989586621679108969"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () b Void m () -&gt; ZipSource m b
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () b Void m () -&gt; ZipSource m b)
-&gt; Pipe () b Void m () -&gt; ZipSource m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pipe () (a -&gt; b) Void m ()
-&gt; Pipe () a Void m () -&gt; Pipe () b Void m ()
forall (m :: * -&gt; *) a b u v w.
Monad m =&gt;
Pipe () (a -&gt; b) u m () -&gt; Pipe () a v m () -&gt; Pipe () b w m ()
</span><a href="Data.Conduino.html#zipSource"><span class="hs-identifier hs-var">zipSource</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe () (a -&gt; b) Void m ()
</span><a href="#local-6989586621679108971"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m ()
</span><a href="#local-6989586621679108969"><span class="hs-identifier hs-var">q</span></a></span></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span class="hs-comment">-- | Takes two sources and runs them in parallel, collating their outputs.</span><span>
</span><span id="line-470"></span><span class="hs-comment">--</span><span>
</span><span id="line-471"></span><span class="hs-comment">-- @since 0.2.1.0</span><span>
</span><span id="line-472"></span><span id="local-6989586621679109326"><span id="local-6989586621679109327"><span id="local-6989586621679109328"><span id="local-6989586621679109329"><span id="local-6989586621679109330"><span id="local-6989586621679109331"><span class="annot"><a href="Data.Conduino.html#zipSource"><span class="hs-identifier hs-type">zipSource</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109330"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109329"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109328"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109330"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109327"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679109329"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109326"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-473"></span><span id="zipSource"><span class="annot"><span class="annottext">zipSource :: Pipe () (a -&gt; b) u m () -&gt; Pipe () a v m () -&gt; Pipe () b w m ()
</span><a href="Data.Conduino.html#zipSource"><span class="hs-identifier hs-var hs-var">zipSource</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-type">PipeList</span></a></span><span> </span><span id="local-6989586621679108968"><span class="annot"><span class="annottext">fs :: ListT m (Maybe (a -&gt; b))
</span><a href="#local-6989586621679108968"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-type">PipeList</span></a></span><span> </span><span id="local-6989586621679108967"><span class="annot"><span class="annottext">xs :: ListT m (Maybe a)
</span><a href="#local-6989586621679108967"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe b) -&gt; Pipe () b w m ()
forall (m :: * -&gt; *) a u.
Monad m =&gt;
ListT m (Maybe a) -&gt; Pipe () a u m ()
</span><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-var">PipeList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListT m (Maybe b) -&gt; Pipe () b w m ())
-&gt; (ListT m b -&gt; ListT m (Maybe b))
-&gt; ListT m b
-&gt; Pipe () b w m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; Maybe b) -&gt; ListT m b -&gt; ListT m (Maybe b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ListT m b -&gt; Pipe () b w m ()) -&gt; ListT m b -&gt; Pipe () b w m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-474"></span><span>    </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; a -&gt; b) -&gt; (a -&gt; b, a) -&gt; b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; a -&gt; b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">($)</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; b, a) -&gt; b) -&gt; ListT m (a -&gt; b, a) -&gt; ListT m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ListT m (a -&gt; b) -&gt; ListT m a -&gt; ListT m (a -&gt; b, a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
ListT m a -&gt; ListT m b -&gt; ListT m (a, b)
</span><span class="hs-identifier hs-var">LT.zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe (a -&gt; b)) -&gt; ListT m (a -&gt; b)
forall (m :: * -&gt; *) a. Monad m =&gt; ListT m (Maybe a) -&gt; ListT m a
</span><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-var">concatListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe (a -&gt; b))
</span><a href="#local-6989586621679108968"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; ListT m a
forall (m :: * -&gt; *) a. Monad m =&gt; ListT m (Maybe a) -&gt; ListT m a
</span><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-var">concatListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108967"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span id="local-6989586621679109312"><span id="local-6989586621679109313"><span class="annot"><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-type">concatListT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109313"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679109313"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679109312"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679109313"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109312"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-477"></span><span id="concatListT"><span class="annot"><span class="annottext">concatListT :: ListT m (Maybe a) -&gt; ListT m a
</span><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-var hs-var">concatListT</span></a></span></span><span> </span><span id="local-6989586621679108963"><span class="annot"><span class="annottext">xs :: ListT m (Maybe a)
</span><a href="#local-6989586621679108963"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Step m a) -&gt; ListT m a
forall (m :: * -&gt; *) a. m (Step m a) -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(m (Step m a) -&gt; ListT m a) -&gt; m (Step m a) -&gt; ListT m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; m (Step m (Maybe a))
forall (m :: * -&gt; *) a. ListT m a -&gt; m (Step m a)
</span><span class="hs-identifier hs-var hs-var">next</span></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108963"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step m (Maybe a))
-&gt; (Step m (Maybe a) -&gt; m (Step m a)) -&gt; m (Step m a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Nil</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step m a -&gt; m (Step m a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Step m a
forall (m :: * -&gt; *) a. Step m a
</span><span class="hs-identifier hs-var">Nil</span></span><span>
</span><span id="line-479"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cons</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>  </span><span id="local-6989586621679108958"><span class="annot"><span class="annottext">ys :: ListT m (Maybe a)
</span><a href="#local-6989586621679108958"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ListT m a -&gt; m (Step m a)
forall (m :: * -&gt; *) a. ListT m a -&gt; m (Step m a)
</span><span class="hs-identifier hs-var hs-var">next</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; ListT m a
forall (m :: * -&gt; *) a. Monad m =&gt; ListT m (Maybe a) -&gt; ListT m a
</span><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-var">concatListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108958"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679108957"><span class="annot"><span class="annottext">y :: a
</span><a href="#local-6989586621679108957"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679108956"><span class="annot"><span class="annottext">ys :: ListT m (Maybe a)
</span><a href="#local-6989586621679108956"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step m a -&gt; m (Step m a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Step m a -&gt; m (Step m a)) -&gt; Step m a -&gt; m (Step m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; ListT m a -&gt; Step m a
forall (m :: * -&gt; *) a. a -&gt; ListT m a -&gt; Step m a
</span><span class="hs-identifier hs-var">Cons</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679108957"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; ListT m a
forall (m :: * -&gt; *) a. Monad m =&gt; ListT m (Maybe a) -&gt; ListT m a
</span><a href="Data.Conduino.html#concatListT"><span class="hs-identifier hs-var">concatListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108956"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span id="local-6989586621679108955"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679108948"><span id="local-6989586621679108950"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679108955"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108955"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>    </span><span id="local-6989586621679108946"><span class="annot"><span class="annottext">empty :: ZipSource m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; ZipSource m a
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () a Void m () -&gt; ZipSource m a)
-&gt; Pipe () a Void m () -&gt; ZipSource m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Pipe () a Void m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>    </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span id="local-6989586621679108944"><span class="annot"><span class="annottext">p :: Pipe () a Void m ()
</span><a href="#local-6989586621679108944"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108943"><span class="annot"><span class="annottext">&lt;|&gt; :: ZipSource m a -&gt; ZipSource m a -&gt; ZipSource m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></span></span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span id="local-6989586621679108941"><span class="annot"><span class="annottext">q :: Pipe () a Void m ()
</span><a href="#local-6989586621679108941"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; ZipSource m a
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe () a Void m ()
</span><a href="#local-6989586621679108944"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; Pipe () a Void m () -&gt; Pipe () a Void m ()
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m ()
</span><a href="#local-6989586621679108941"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-487"></span><span>    </span><span id="local-6989586621679108938"><span class="annot"><span class="annottext">lift :: m a -&gt; ZipSource m a
</span><a href="#local-6989586621679108938"><span class="hs-identifier hs-var hs-var hs-var hs-var">lift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; ZipSource m a
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe () a Void m () -&gt; ZipSource m a)
-&gt; (m a -&gt; Pipe () a Void m ()) -&gt; m a -&gt; ZipSource m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Pipe () a Void m ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Pipe () a Void m ())
-&gt; Pipe () a Void m a -&gt; Pipe () a Void m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pipe () a Void m a -&gt; Pipe () a Void m ())
-&gt; (m a -&gt; Pipe () a Void m a) -&gt; m a -&gt; Pipe () a Void m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; Pipe () a Void m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span class="hs-comment">-- | A source is essentially equivalent to 'ListT' producing a 'Maybe'</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- result.  This converts it to the 'ListT' it encodes.</span><span>
</span><span id="line-491"></span><span class="hs-comment">--</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- See 'ZipSource' for a wrapper over 'Pipe' that gives the right 'Functor'</span><span>
</span><span id="line-493"></span><span class="hs-comment">-- and 'Alternative' instances.</span><span>
</span><span id="line-494"></span><span id="local-6989586621679108935"><span id="local-6989586621679108936"><span id="local-6989586621679108937"><span class="annot"><a href="Data.Conduino.html#toListT"><span class="hs-identifier hs-type">toListT</span></a></span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679108937"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679108936"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108935"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108937"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679108937"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679108936"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-498"></span><span id="toListT"><span class="annot"><span class="annottext">toListT :: Pipe () o u m () -&gt; ListT m (Maybe o)
</span><a href="Data.Conduino.html#toListT"><span class="hs-identifier hs-var hs-var">toListT</span></a></span></span><span> </span><span id="local-6989586621679108934"><span class="annot"><span class="annottext">p :: Pipe () o u m ()
</span><a href="#local-6989586621679108934"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Step m (Maybe o)) -&gt; ListT m (Maybe o)
forall (m :: * -&gt; *) a. m (Step m a) -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(m (Step m (Maybe o)) -&gt; ListT m (Maybe o))
-&gt; m (Step m (Maybe o)) -&gt; ListT m (Maybe o)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF () o u) m ()
-&gt; (() -&gt; m (Step m (Maybe o)))
-&gt; (forall x.
    (x -&gt; m (Step m (Maybe o)))
    -&gt; PipeF () o u x -&gt; m (Step m (Maybe o)))
-&gt; m (Step m (Maybe o))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FT f m a
-&gt; forall r.
   (a -&gt; m r) -&gt; (forall x. (x -&gt; m r) -&gt; f x -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var hs-var">runFT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe () o u m () -&gt; FT (PipeF () o u) m ()
forall i o u (m :: * -&gt; *) a.
Pipe i o u m a -&gt; FT (PipeF i o u) m a
</span><a href="Data.Conduino.Internal.html#pipeFree"><span class="hs-identifier hs-var hs-var">pipeFree</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe () o u m ()
</span><a href="#local-6989586621679108934"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step m (Maybe o) -&gt; m (Step m (Maybe o))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Step m (Maybe o)
forall (m :: * -&gt; *) a. Step m a
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679108933"><span class="annot"><span class="annottext">pNext :: x -&gt; m (Step m (Maybe o))
</span><a href="#local-6989586621679108933"><span class="hs-identifier hs-var">pNext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-501"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679108932"><span class="annot"><span class="annottext">g :: () -&gt; x
</span><a href="#local-6989586621679108932"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step m (Maybe o) -&gt; m (Step m (Maybe o))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Step m (Maybe o) -&gt; m (Step m (Maybe o)))
-&gt; Step m (Maybe o) -&gt; m (Step m (Maybe o))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe o -&gt; ListT m (Maybe o) -&gt; Step m (Maybe o)
forall (m :: * -&gt; *) a. a -&gt; ListT m a -&gt; Step m a
</span><span class="hs-identifier hs-var">Cons</span></span><span> </span><span class="annot"><span class="annottext">Maybe o
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (Step m (Maybe o)) -&gt; ListT m (Maybe o)
forall (m :: * -&gt; *) a. m (Step m a) -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(m (Step m (Maybe o)) -&gt; ListT m (Maybe o))
-&gt; (x -&gt; m (Step m (Maybe o))) -&gt; x -&gt; ListT m (Maybe o)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m (Step m (Maybe o))
</span><a href="#local-6989586621679108933"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; ListT m (Maybe o)) -&gt; x -&gt; ListT m (Maybe o)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; x
</span><a href="#local-6989586621679108932"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108931"><span class="annot"><span class="annottext">x :: o
</span><a href="#local-6989586621679108931"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679108930"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621679108930"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Step m (Maybe o) -&gt; m (Step m (Maybe o))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Step m (Maybe o) -&gt; m (Step m (Maybe o)))
-&gt; Step m (Maybe o) -&gt; m (Step m (Maybe o))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe o -&gt; ListT m (Maybe o) -&gt; Step m (Maybe o)
forall (m :: * -&gt; *) a. a -&gt; ListT m a -&gt; Step m a
</span><span class="hs-identifier hs-var">Cons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o -&gt; Maybe o
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679108931"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (Step m (Maybe o)) -&gt; ListT m (Maybe o)
forall (m :: * -&gt; *) a. m (Step m a) -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(m (Step m (Maybe o)) -&gt; ListT m (Maybe o))
-&gt; (x -&gt; m (Step m (Maybe o))) -&gt; x -&gt; ListT m (Maybe o)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m (Step m (Maybe o))
</span><a href="#local-6989586621679108933"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; ListT m (Maybe o)) -&gt; x -&gt; ListT m (Maybe o)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679108930"><span class="hs-identifier hs-var">y</span></a></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="hs-comment">-- | A source is essentially 'ListT' producing a 'Maybe' result.  This</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- converts a 'ListT' to the source it encodes.</span><span>
</span><span id="line-507"></span><span class="hs-comment">--</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- See 'ZipSource' for a wrapper over 'Pipe' that gives the right 'Functor'</span><span>
</span><span id="line-509"></span><span class="hs-comment">-- and 'Alternative' instances.</span><span>
</span><span id="line-510"></span><span id="local-6989586621679109365"><span id="local-6989586621679109366"><span id="local-6989586621679109367"><span id="local-6989586621679109368"><span class="annot"><a href="Data.Conduino.html#fromListT"><span class="hs-identifier hs-type">fromListT</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109368"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679109368"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679109367"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109366"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109367"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109365"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109368"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-514"></span><span id="fromListT"><span class="annot"><span class="annottext">fromListT :: ListT m (Maybe o) -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.html#fromListT"><span class="hs-identifier hs-var hs-var">fromListT</span></a></span></span><span> </span><span id="local-6989586621679108929"><span class="annot"><span class="annottext">xs :: ListT m (Maybe o)
</span><a href="#local-6989586621679108929"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Step m (Maybe o)) -&gt; Pipe i o u m (Step m (Maybe o))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe o) -&gt; m (Step m (Maybe o))
forall (m :: * -&gt; *) a. ListT m a -&gt; m (Step m a)
</span><span class="hs-identifier hs-var hs-var">next</span></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe o)
</span><a href="#local-6989586621679108929"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Step m (Maybe o))
-&gt; (Step m (Maybe o) -&gt; Pipe i o u m ()) -&gt; Pipe i o u m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-515"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Nil</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Pipe i o u m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Cons</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>  </span><span id="local-6989586621679108928"><span class="annot"><span class="annottext">ys :: ListT m (Maybe o)
</span><a href="#local-6989586621679108928"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe o) -&gt; Pipe i o u m ()
forall (m :: * -&gt; *) o i u.
Monad m =&gt;
ListT m (Maybe o) -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.html#fromListT"><span class="hs-identifier hs-var">fromListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe o)
</span><a href="#local-6989586621679108928"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-517"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Cons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679108927"><span class="annot"><span class="annottext">y :: o
</span><a href="#local-6989586621679108927"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679108926"><span class="annot"><span class="annottext">ys :: ListT m (Maybe o)
</span><a href="#local-6989586621679108926"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; Pipe i o u m ()
forall o i u (m :: * -&gt; *). o -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.Internal.html#yield"><span class="hs-identifier hs-var">yield</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679108927"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m () -&gt; Pipe i o u m () -&gt; Pipe i o u m ()
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe o) -&gt; Pipe i o u m ()
forall (m :: * -&gt; *) o i u.
Monad m =&gt;
ListT m (Maybe o) -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.html#fromListT"><span class="hs-identifier hs-var">fromListT</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe o)
</span><a href="#local-6989586621679108926"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-comment">-- | Given a &quot;generator&quot; of @o@ in @m@, return a /source/ that that</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- generator encodes.  Is the inverse of 'withSource'.</span><span>
</span><span id="line-521"></span><span class="hs-comment">--</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- The generator is essentially a church-encoded 'ListT'.</span><span>
</span><span id="line-523"></span><span id="local-6989586621679108922"><span id="local-6989586621679108923"><span id="local-6989586621679108924"><span id="local-6989586621679108925"><span class="annot"><a href="Data.Conduino.html#genSource"><span class="hs-identifier hs-type">genSource</span></a></span><span>
</span><span id="line-524"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679109280"><span class="annot"><a href="#local-6989586621679109280"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108925"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109280"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109280"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109280"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108923"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108925"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108922"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108924"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-526"></span><span id="genSource"><span class="annot"><span class="annottext">genSource :: (forall r. (Maybe (o, m r) -&gt; m r) -&gt; m r) -&gt; Pipe i o u m ()
</span><a href="Data.Conduino.html#genSource"><span class="hs-identifier hs-var hs-var">genSource</span></a></span></span><span> </span><span id="local-6989586621679108921"><span class="annot"><span class="annottext">f :: forall r. (Maybe (o, m r) -&gt; m r) -&gt; m r
</span><a href="#local-6989586621679108921"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF i o u) m () -&gt; Pipe i o u m ()
forall i o u (m :: * -&gt; *) a.
FT (PipeF i o u) m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-var">Pipe</span></a></span><span> </span><span class="annot"><span class="annottext">(FT (PipeF i o u) m () -&gt; Pipe i o u m ())
-&gt; FT (PipeF i o u) m () -&gt; Pipe i o u m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall r.
 (() -&gt; m r)
 -&gt; (forall x. (x -&gt; m r) -&gt; PipeF i o u x -&gt; m r) -&gt; m r)
-&gt; FT (PipeF i o u) m ()
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(forall r.
 (a -&gt; m r) -&gt; (forall x. (x -&gt; m r) -&gt; f x -&gt; m r) -&gt; m r)
-&gt; FT f m a
</span><span class="hs-identifier hs-var">FT</span></span><span> </span><span class="annot"><span class="annottext">((forall r.
  (() -&gt; m r)
  -&gt; (forall x. (x -&gt; m r) -&gt; PipeF i o u x -&gt; m r) -&gt; m r)
 -&gt; FT (PipeF i o u) m ())
-&gt; (forall r.
    (() -&gt; m r)
    -&gt; (forall x. (x -&gt; m r) -&gt; PipeF i o u x -&gt; m r) -&gt; m r)
-&gt; FT (PipeF i o u) m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108919"><span class="annot"><span class="annottext">pDone :: () -&gt; m r
</span><a href="#local-6989586621679108919"><span class="hs-identifier hs-var">pDone</span></a></span></span><span> </span><span id="local-6989586621679108918"><span class="annot"><span class="annottext">pFree :: forall x. (x -&gt; m r) -&gt; PipeF i o u x -&gt; m r
</span><a href="#local-6989586621679108918"><span class="hs-identifier hs-var">pFree</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe (o, m r) -&gt; m r) -&gt; m r
forall r. (Maybe (o, m r) -&gt; m r) -&gt; m r
</span><a href="#local-6989586621679108921"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe (o, m r) -&gt; m r) -&gt; m r) -&gt; (Maybe (o, m r) -&gt; m r) -&gt; m r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-527"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m r
</span><a href="#local-6989586621679108919"><span class="hs-identifier hs-var">pDone</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679108917"><span class="annot"><span class="annottext">x :: o
</span><a href="#local-6989586621679108917"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679108916"><span class="annot"><span class="annottext">xs :: m r
</span><a href="#local-6989586621679108916"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(m r -&gt; m r) -&gt; PipeF i o u (m r) -&gt; m r
forall x. (x -&gt; m r) -&gt; PipeF i o u x -&gt; m r
</span><a href="#local-6989586621679108918"><span class="hs-identifier hs-var">pFree</span></a></span><span> </span><span class="annot"><span class="annottext">m r -&gt; m r
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o -&gt; m r -&gt; PipeF i o u (m r)
forall i o u a. o -&gt; a -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-var">PYieldF</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679108917"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">m r
</span><a href="#local-6989586621679108916"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-comment">-- | A source can be &quot;run&quot; by providing a continuation to handle and</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- sequence each of its outputs.  Is ths inverse of 'genSource'.</span><span>
</span><span id="line-532"></span><span class="hs-comment">--</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- This essentially turns a pipe into a church-encoded 'ListT'.</span><span>
</span><span id="line-534"></span><span id="local-6989586621679108912"><span id="local-6989586621679108913"><span id="local-6989586621679108914"><span id="local-6989586621679108915"><span class="annot"><a href="Data.Conduino.html#withSource"><span class="hs-identifier hs-type">withSource</span></a></span><span>
</span><span id="line-535"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679108915"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108914"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108913"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108915"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108913"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108912"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108913"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108912"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- ^ handler ('Nothing' = done, @'Just' (x, next)@ = yielded value and next action</span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108913"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108912"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-538"></span><span id="withSource"><span class="annot"><span class="annottext">withSource :: Pipe () o u m () -&gt; (Maybe (o, m r) -&gt; m r) -&gt; m r
</span><a href="Data.Conduino.html#withSource"><span class="hs-identifier hs-var hs-var">withSource</span></a></span></span><span> </span><span id="local-6989586621679108911"><span class="annot"><span class="annottext">p :: Pipe () o u m ()
</span><a href="#local-6989586621679108911"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108910"><span class="annot"><span class="annottext">f :: Maybe (o, m r) -&gt; m r
</span><a href="#local-6989586621679108910"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF () o u) m ()
-&gt; (() -&gt; m r)
-&gt; (forall x. (x -&gt; m r) -&gt; PipeF () o u x -&gt; m r)
-&gt; m r
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FT f m a
-&gt; forall r.
   (a -&gt; m r) -&gt; (forall x. (x -&gt; m r) -&gt; f x -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var hs-var">runFT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pipe () o u m () -&gt; FT (PipeF () o u) m ()
forall i o u (m :: * -&gt; *) a.
Pipe i o u m a -&gt; FT (PipeF i o u) m a
</span><a href="Data.Conduino.Internal.html#pipeFree"><span class="hs-identifier hs-var hs-var">pipeFree</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe () o u m ()
</span><a href="#local-6989586621679108911"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (o, m r) -&gt; m r
</span><a href="#local-6989586621679108910"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (o, m r)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679108909"><span class="annot"><span class="annottext">pNext :: x -&gt; m r
</span><a href="#local-6989586621679108909"><span class="hs-identifier hs-var">pNext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679108908"><span class="annot"><span class="annottext">g :: () -&gt; x
</span><a href="#local-6989586621679108908"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679108909"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">(x -&gt; m r) -&gt; x -&gt; m r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; x
</span><a href="#local-6989586621679108908"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>        </span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108907"><span class="annot"><span class="annottext">x :: o
</span><a href="#local-6989586621679108907"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679108906"><span class="annot"><span class="annottext">y :: x
</span><a href="#local-6989586621679108906"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (o, m r) -&gt; m r
</span><a href="#local-6989586621679108910"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(o, m r) -&gt; Maybe (o, m r)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679108907"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679108909"><span class="hs-identifier hs-var">pNext</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679108906"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-comment">-- | 'ZipSource' is effectively 'ListT' returning a 'Maybe'.  As such, you</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- can use 'unconsZipSource' to &quot;peel off&quot; the first yielded item, if it</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- exists, and return the &quot;rest of the list&quot;.</span><span>
</span><span id="line-548"></span><span id="local-6989586621679108904"><span id="local-6989586621679108905"><span class="annot"><a href="Data.Conduino.html#unconsZipSource"><span class="hs-identifier hs-type">unconsZipSource</span></a></span><span>
</span><span id="line-549"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679108905"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108904"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-551"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679108904"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108905"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108904"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-552"></span><span id="unconsZipSource"><span class="annot"><span class="annottext">unconsZipSource :: ZipSource m a -&gt; m (Maybe (Maybe a, ZipSource m a))
</span><a href="Data.Conduino.html#unconsZipSource"><span class="hs-identifier hs-var hs-var">unconsZipSource</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-type">ZipSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-type">PipeList</span></a></span><span> </span><span id="local-6989586621679108903"><span class="annot"><span class="annottext">p :: ListT m (Maybe a)
</span><a href="#local-6989586621679108903"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; m (Step m (Maybe a))
forall (m :: * -&gt; *) a. ListT m a -&gt; m (Step m a)
</span><span class="hs-identifier hs-var hs-var">next</span></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108903"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">m (Step m (Maybe a))
-&gt; (Step m (Maybe a) -&gt; Maybe (Maybe a, ZipSource m a))
-&gt; m (Maybe (Maybe a, ZipSource m a))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-553"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cons</span></span><span> </span><span id="local-6989586621679108901"><span class="annot"><span class="annottext">x :: Maybe a
</span><a href="#local-6989586621679108901"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679108900"><span class="annot"><span class="annottext">xs :: ListT m (Maybe a)
</span><a href="#local-6989586621679108900"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe a, ZipSource m a) -&gt; Maybe (Maybe a, ZipSource m a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679108901"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pipe () a Void m () -&gt; ZipSource m a
forall (m :: * -&gt; *) a. Pipe () a Void m () -&gt; ZipSource m a
</span><a href="Data.Conduino.html#ZipSource"><span class="hs-identifier hs-var">ZipSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ListT m (Maybe a) -&gt; Pipe () a Void m ()
forall (m :: * -&gt; *) a u.
Monad m =&gt;
ListT m (Maybe a) -&gt; Pipe () a u m ()
</span><a href="Data.Conduino.html#PipeList"><span class="hs-identifier hs-var">PipeList</span></a></span><span> </span><span class="annot"><span class="annottext">ListT m (Maybe a)
</span><a href="#local-6989586621679108900"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Nil</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe a, ZipSource m a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span class="hs-comment">-- | A newtype wrapper over a sink (@'Pipe' i 'Void'@) that gives it an</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- alternative 'Applicative' and 'Alternative' instance.</span><span>
</span><span id="line-558"></span><span class="hs-comment">--</span><span>
</span><span id="line-559"></span><span class="hs-comment">-- '&lt;*&gt;' will distribute input over both sinks, and output a final result</span><span>
</span><span id="line-560"></span><span class="hs-comment">-- once both sinks finish.</span><span>
</span><span id="line-561"></span><span class="hs-comment">--</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- '&lt;|&gt;' will distribute input over both sinks, and output a final result</span><span>
</span><span id="line-563"></span><span class="hs-comment">-- as soon as one or the other finishes.</span><span>
</span><span id="line-564"></span><span class="hs-keyword">newtype</span><span> </span><span id="ZipSink"><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span></span><span> </span><span id="local-6989586621679109211"><span class="annot"><a href="#local-6989586621679109211"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span id="local-6989586621679109210"><span class="annot"><a href="#local-6989586621679109210"><span class="hs-identifier hs-type">u</span></a></span></span><span> </span><span id="local-6989586621679109209"><span class="annot"><a href="#local-6989586621679109209"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679109208"><span class="annot"><a href="#local-6989586621679109208"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ZipSink"><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getZipSink"><span class="annot"><span class="annottext">ZipSink i u m a -&gt; Pipe i Void u m a
</span><a href="Data.Conduino.html#getZipSink"><span class="hs-identifier hs-var hs-var">getZipSink</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109211"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109210"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109209"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679108894"><span id="local-6989586621679108896"><span class="annot"><span class="annottext">a -&gt; ZipSink i u m b -&gt; ZipSink i u m a
(a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
(forall a b. (a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b)
-&gt; (forall a b. a -&gt; ZipSink i u m b -&gt; ZipSink i u m a)
-&gt; Functor (ZipSink i u m)
forall a b. a -&gt; ZipSink i u m b -&gt; ZipSink i u m a
forall a b. (a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
forall i u (m :: * -&gt; *) a b.
a -&gt; ZipSink i u m b -&gt; ZipSink i u m a
forall i u (m :: * -&gt; *) a b.
(a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; ZipSink i u m b -&gt; ZipSink i u m a
$c&lt;$ :: forall i u (m :: * -&gt; *) a b.
a -&gt; ZipSink i u m b -&gt; ZipSink i u m a
fmap :: (a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
$cfmap :: forall i u (m :: * -&gt; *) a b.
(a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span>
</span><span id="line-566"></span><span>
</span><span id="line-567"></span><span id="local-6989586621679109240"><span id="local-6989586621679109241"><span id="local-6989586621679109242"><span id="local-6989586621679109243"><span id="local-6989586621679109244"><span class="annot"><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-type">zipSink_</span></a></span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109244"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109243"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109242"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109244"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109241"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109240"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109243"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109242"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109244"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109241"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109243"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109242"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109244"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109240"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span><span>
</span><span id="line-572"></span><span id="zipSink_"><span class="annot"><span class="annottext">zipSink_ :: RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var hs-var">zipSink_</span></a></span></span><span> </span><span id="local-6989586621679108892"><span class="annot"><span class="annottext">p :: RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108892"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108891"><span class="annot"><span class="annottext">q :: RecPipe i Void u m a
</span><a href="#local-6989586621679108891"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; RecPipe i Void u m b
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="annot"><span class="annottext">(m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
 -&gt; RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; RecPipe i Void u m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; m (FreeF
        (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108892"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
-&gt; (FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
    -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108890"><span class="annot"><span class="annottext">pp :: FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
</span><a href="#local-6989586621679108890"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
</span><a href="#local-6989586621679108890"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-573"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679108889"><span class="annot"><span class="annottext">x :: a -&gt; b
</span><a href="#local-6989586621679108889"><span class="hs-identifier hs-var">x</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
</span><a href="#local-6989586621679108891"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; (FreeF (PipeF i Void u) a (RecPipe i Void u m a)
    -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-574"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679108888"><span class="annot"><span class="annottext">x' :: a
</span><a href="#local-6989586621679108888"><span class="hs-identifier hs-var">x'</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) b (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF i Void u) b (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; (b -&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; b
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b)
forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Pure</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; b -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679108889"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679108888"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-575"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679108887"><span class="annot"><span class="annottext">f' :: u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108887"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621679108886"><span class="annot"><span class="annottext">g' :: i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108886"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) b (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF i Void u) b (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; (PipeF i Void u (RecPipe i Void u m b)
    -&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PipeF i Void u (RecPipe i Void u m b)
-&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF i Void u (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-576"></span><span>        </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m b)
-&gt; PipeF i Void u (RecPipe i Void u m b)
forall i o u a. (u -&gt; a) -&gt; (i -&gt; a) -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-var">PAwaitF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var">zipSink_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
-&gt; RecPipe i Void u m (a -&gt; b)
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
-&gt; m (FreeF
        (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
</span><a href="#local-6989586621679108890"><span class="hs-identifier hs-var">pp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (u -&gt; RecPipe i Void u m a) -&gt; u -&gt; RecPipe i Void u m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108887"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var">zipSink_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
-&gt; RecPipe i Void u m (a -&gt; b)
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
-&gt; m (FreeF
        (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) (a -&gt; b) (RecPipe i Void u m (a -&gt; b))
</span><a href="#local-6989586621679108890"><span class="hs-identifier hs-var">pp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m a) -&gt; i -&gt; RecPipe i Void u m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108886"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108885"><span class="annot"><span class="annottext">x' :: Void
</span><a href="#local-6989586621679108885"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679108885"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-579"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679108884"><span class="annot"><span class="annottext">f :: u -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108884"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679108883"><span class="annot"><span class="annottext">g :: i -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108883"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
</span><a href="#local-6989586621679108891"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; (FreeF (PipeF i Void u) a (RecPipe i Void u m a)
    -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108882"><span class="annot"><span class="annottext">qq :: FreeF (PipeF i Void u) a (RecPipe i Void u m a)
</span><a href="#local-6989586621679108882"><span class="hs-identifier hs-var">qq</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
</span><a href="#local-6989586621679108882"><span class="hs-identifier hs-var">qq</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-580"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span class="hs-identifier">_</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) b (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF i Void u) b (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; (PipeF i Void u (RecPipe i Void u m b)
    -&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PipeF i Void u (RecPipe i Void u m b)
-&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF i Void u (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-581"></span><span>        </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m b)
-&gt; PipeF i Void u (RecPipe i Void u m b)
forall i o u a. (u -&gt; a) -&gt; (i -&gt; a) -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-var">PAwaitF</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-operator hs-var">`zipSink_`</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
</span><a href="#local-6989586621679108882"><span class="hs-identifier hs-var">qq</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m (a -&gt; b) -&gt; RecPipe i Void u m b)
-&gt; (u -&gt; RecPipe i Void u m (a -&gt; b)) -&gt; u -&gt; RecPipe i Void u m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108884"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>                </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-operator hs-var">`zipSink_`</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
</span><a href="#local-6989586621679108882"><span class="hs-identifier hs-var">qq</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m (a -&gt; b) -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m (a -&gt; b)) -&gt; i -&gt; RecPipe i Void u m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108883"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679108881"><span class="annot"><span class="annottext">f' :: u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108881"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621679108880"><span class="annot"><span class="annottext">g' :: i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108880"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) b (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF i Void u) b (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; (PipeF i Void u (RecPipe i Void u m b)
    -&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PipeF i Void u (RecPipe i Void u m b)
-&gt; FreeF (PipeF i Void u) b (RecPipe i Void u m b)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF i Void u (RecPipe i Void u m b)
 -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b)))
-&gt; PipeF i Void u (RecPipe i Void u m b)
-&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-584"></span><span>        </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m b)
-&gt; PipeF i Void u (RecPipe i Void u m b)
forall i o u a. (u -&gt; a) -&gt; (i -&gt; a) -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-var">PAwaitF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var">zipSink_</span></a></span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m (a -&gt; b)
 -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (u -&gt; RecPipe i Void u m (a -&gt; b))
-&gt; u
-&gt; RecPipe i Void u m a
-&gt; RecPipe i Void u m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108884"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (u -&gt; RecPipe i Void u m a) -&gt; u -&gt; RecPipe i Void u m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108881"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var">zipSink_</span></a></span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m (a -&gt; b)
 -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m (a -&gt; b))
-&gt; i
-&gt; RecPipe i Void u m a
-&gt; RecPipe i Void u m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108883"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(i -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b)
-&gt; (i -&gt; RecPipe i Void u m a) -&gt; i -&gt; RecPipe i Void u m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108880"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108879"><span class="annot"><span class="annottext">x' :: Void
</span><a href="#local-6989586621679108879"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679108879"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-586"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108878"><span class="annot"><span class="annottext">x :: Void
</span><a href="#local-6989586621679108878"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; m (FreeF (PipeF i Void u) b (RecPipe i Void u m b))
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679108878"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span id="local-6989586621679109232"><span id="local-6989586621679109233"><span id="local-6989586621679109234"><span id="local-6989586621679109235"><span class="annot"><a href="Data.Conduino.html#altSink_"><span class="hs-identifier hs-type">altSink_</span></a></span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109235"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109234"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109233"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109235"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109232"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109234"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109233"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109235"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109232"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#RecPipe"><span class="hs-identifier hs-type">RecPipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109234"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109233"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109235"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109232"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-593"></span><span id="altSink_"><span class="annot"><span class="annottext">altSink_ :: RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
</span><a href="Data.Conduino.html#altSink_"><span class="hs-identifier hs-var hs-var">altSink_</span></a></span></span><span> </span><span id="local-6989586621679108876"><span class="annot"><span class="annottext">p :: RecPipe i Void u m a
</span><a href="#local-6989586621679108876"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108875"><span class="annot"><span class="annottext">q :: RecPipe i Void u m a
</span><a href="#local-6989586621679108875"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
m (FreeF f a (FreeT f m a)) -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">FreeT</span></span><span> </span><span class="annot"><span class="annottext">(m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
 -&gt; RecPipe i Void u m a)
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; RecPipe i Void u m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
</span><a href="#local-6989586621679108876"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; (FreeF (PipeF i Void u) a (RecPipe i Void u m a)
    -&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a)))
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679108874"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621679108874"><span class="hs-identifier hs-var">x</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeF (PipeF i Void u) a (RecPipe i Void u m a)
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FreeF (PipeF i Void u) a (RecPipe i Void u m a)
 -&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a)))
-&gt; (a -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; a
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a)
forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Pure</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a)))
-&gt; a -&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679108874"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-595"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679108873"><span class="annot"><span class="annottext">f :: u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108873"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679108872"><span class="annot"><span class="annottext">g :: i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108872"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
FreeT f m a -&gt; m (FreeF f a (FreeT f m a))
</span><span class="hs-identifier hs-var hs-var">runFreeT</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m a
</span><a href="#local-6989586621679108875"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; (FreeF (PipeF i Void u) a (RecPipe i Void u m a)
    -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-596"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pure</span></span><span> </span><span id="local-6989586621679108871"><span class="annot"><span class="annottext">x' :: a
</span><a href="#local-6989586621679108871"><span class="hs-identifier hs-var">x'</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a)
forall (f :: * -&gt; *) a b. a -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679108871"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-597"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-type">PAwaitF</span></a></span><span> </span><span id="local-6989586621679108870"><span class="annot"><span class="annottext">f' :: u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108870"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621679108869"><span class="annot"><span class="annottext">g' :: i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108869"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PipeF i Void u (RecPipe i Void u m a)
-&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a)
forall (f :: * -&gt; *) a b. f b -&gt; FreeF f a b
</span><span class="hs-identifier hs-var">Free</span></span><span> </span><span class="annot"><span class="annottext">(PipeF i Void u (RecPipe i Void u m a)
 -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a))
-&gt; PipeF i Void u (RecPipe i Void u m a)
-&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m a)
-&gt; (i -&gt; RecPipe i Void u m a)
-&gt; PipeF i Void u (RecPipe i Void u m a)
forall i o u a. (u -&gt; a) -&gt; (i -&gt; a) -&gt; PipeF i o u a
</span><a href="Data.Conduino.Internal.html#PAwaitF"><span class="hs-identifier hs-var">PAwaitF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
forall (m :: * -&gt; *) i u a.
Monad m =&gt;
RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
</span><a href="Data.Conduino.html#altSink_"><span class="hs-identifier hs-var">altSink_</span></a></span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m a
 -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a)
-&gt; (u -&gt; RecPipe i Void u m a)
-&gt; u
-&gt; RecPipe i Void u m a
-&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108873"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(u -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a)
-&gt; (u -&gt; RecPipe i Void u m a) -&gt; u -&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">u -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108870"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
forall (m :: * -&gt; *) i u a.
Monad m =&gt;
RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
</span><a href="Data.Conduino.html#altSink_"><span class="hs-identifier hs-var">altSink_</span></a></span><span> </span><span class="annot"><span class="annottext">(RecPipe i Void u m a
 -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a)
-&gt; (i -&gt; RecPipe i Void u m a)
-&gt; i
-&gt; RecPipe i Void u m a
-&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108872"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(i -&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a)
-&gt; (i -&gt; RecPipe i Void u m a) -&gt; i -&gt; RecPipe i Void u m a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; RecPipe i Void u m a
</span><a href="#local-6989586621679108869"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108868"><span class="annot"><span class="annottext">x' :: Void
</span><a href="#local-6989586621679108868"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; FreeF (PipeF i Void u) a (RecPipe i Void u m a)
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679108868"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#PYieldF"><span class="hs-identifier hs-type">PYieldF</span></a></span><span> </span><span id="local-6989586621679108867"><span class="annot"><span class="annottext">x :: Void
</span><a href="#local-6989586621679108867"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; m (FreeF (PipeF i Void u) a (RecPipe i Void u m a))
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679108867"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="hs-comment">-- | Distribute input to both sinks, and finishes with the final result</span><span>
</span><span id="line-602"></span><span class="hs-comment">-- once both finish.</span><span>
</span><span id="line-603"></span><span class="hs-comment">--</span><span>
</span><span id="line-604"></span><span class="hs-comment">-- Forms an identity with 'pure'.</span><span>
</span><span id="line-605"></span><span id="local-6989586621679109201"><span id="local-6989586621679109202"><span id="local-6989586621679109203"><span id="local-6989586621679109204"><span id="local-6989586621679109205"><span class="annot"><a href="Data.Conduino.html#zipSink"><span class="hs-identifier hs-type">zipSink</span></a></span><span>
</span><span id="line-606"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109205"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-607"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109204"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109203"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679109202"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679109201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109204"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109203"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109202"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-609"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109204"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109203"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109201"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span><span>
</span><span id="line-610"></span><span id="zipSink"><span class="annot"><span class="annottext">zipSink :: Pipe i Void u m (a -&gt; b) -&gt; Pipe i Void u m a -&gt; Pipe i Void u m b
</span><a href="Data.Conduino.html#zipSink"><span class="hs-identifier hs-var hs-var">zipSink</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679108866"><span class="annot"><span class="annottext">p :: FT (PipeF i Void u) m (a -&gt; b)
</span><a href="#local-6989586621679108866"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679108865"><span class="annot"><span class="annottext">q :: FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108865"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m b -&gt; Pipe i Void u m b
forall i o u (m :: * -&gt; *) a.
FT (PipeF i o u) m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-var">Pipe</span></a></span><span> </span><span class="annot"><span class="annottext">(FT (PipeF i Void u) m b -&gt; Pipe i Void u m b)
-&gt; FT (PipeF i Void u) m b -&gt; Pipe i Void u m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FreeT (PipeF i Void u) m b -&gt; FT (PipeF i Void u) m b
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
Monad m =&gt;
FreeT f m a -&gt; FT f m a
</span><span class="hs-identifier hs-var">toFT</span></span><span> </span><span class="annot"><span class="annottext">(FreeT (PipeF i Void u) m b -&gt; FT (PipeF i Void u) m b)
-&gt; FreeT (PipeF i Void u) m b -&gt; FT (PipeF i Void u) m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; FreeT (PipeF i Void u) m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
RecPipe i Void u m (a -&gt; b)
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m b
</span><a href="Data.Conduino.html#zipSink_"><span class="hs-identifier hs-var">zipSink_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF i Void u) m (a -&gt; b) -&gt; RecPipe i Void u m (a -&gt; b)
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m (a -&gt; b)
</span><a href="#local-6989586621679108866"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a -&gt; RecPipe i Void u m a
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108865"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="hs-comment">-- | Distribute input to both sinks, and finishes with the result of</span><span>
</span><span id="line-613"></span><span class="hs-comment">-- the one that finishes first.</span><span>
</span><span id="line-614"></span><span id="local-6989586621679109178"><span id="local-6989586621679109179"><span id="local-6989586621679109180"><span id="local-6989586621679109181"><span class="annot"><a href="Data.Conduino.html#altSink"><span class="hs-identifier hs-type">altSink</span></a></span><span>
</span><span id="line-615"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679109181"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-616"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109180"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109179"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109181"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109178"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-617"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109180"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109179"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109181"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109178"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109180"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span> </span><span class="annot"><a href="#local-6989586621679109179"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109181"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679109178"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-619"></span><span id="altSink"><span class="annot"><span class="annottext">altSink :: Pipe i Void u m a -&gt; Pipe i Void u m a -&gt; Pipe i Void u m a
</span><a href="Data.Conduino.html#altSink"><span class="hs-identifier hs-var hs-var">altSink</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679108864"><span class="annot"><span class="annottext">p :: FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108864"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a></span><span> </span><span id="local-6989586621679108863"><span class="annot"><span class="annottext">q :: FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108863"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a -&gt; Pipe i Void u m a
forall i o u (m :: * -&gt; *) a.
FT (PipeF i o u) m a -&gt; Pipe i o u m a
</span><a href="Data.Conduino.Internal.html#Pipe"><span class="hs-identifier hs-var">Pipe</span></a></span><span> </span><span class="annot"><span class="annottext">(FT (PipeF i Void u) m a -&gt; Pipe i Void u m a)
-&gt; FT (PipeF i Void u) m a -&gt; Pipe i Void u m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FreeT (PipeF i Void u) m a -&gt; FT (PipeF i Void u) m a
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
Monad m =&gt;
FreeT f m a -&gt; FT f m a
</span><span class="hs-identifier hs-var">toFT</span></span><span> </span><span class="annot"><span class="annottext">(FreeT (PipeF i Void u) m a -&gt; FT (PipeF i Void u) m a)
-&gt; FreeT (PipeF i Void u) m a -&gt; FT (PipeF i Void u) m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FreeT (PipeF i Void u) m a
-&gt; FreeT (PipeF i Void u) m a -&gt; FreeT (PipeF i Void u) m a
forall (m :: * -&gt; *) i u a.
Monad m =&gt;
RecPipe i Void u m a
-&gt; RecPipe i Void u m a -&gt; RecPipe i Void u m a
</span><a href="Data.Conduino.html#altSink_"><span class="hs-identifier hs-var">altSink_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a -&gt; FreeT (PipeF i Void u) m a
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108864"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a -&gt; FreeT (PipeF i Void u) m a
forall (m :: * -&gt; *) (f :: * -&gt; *) a.
(Monad m, Functor f) =&gt;
FT f m a -&gt; FreeT f m a
</span><span class="hs-identifier hs-var">fromFT</span></span><span> </span><span class="annot"><span class="annottext">FT (PipeF i Void u) m a
</span><a href="#local-6989586621679108863"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span class="hs-comment">-- | '&lt;*&gt;' = distribute input to all, and return result when they finish</span><span>
</span><span id="line-622"></span><span class="hs-comment">--</span><span>
</span><span id="line-623"></span><span class="hs-comment">-- 'pure' = immediately finish</span><span>
</span><span id="line-624"></span><span id="local-6989586621679108860"><span id="local-6989586621679108861"><span id="local-6989586621679108862"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679108851"><span id="local-6989586621679108853"><span id="local-6989586621679108855"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679108862"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108861"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108860"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108862"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-625"></span><span>    </span><span id="local-6989586621679108850"><span class="annot"><span class="annottext">pure :: a -&gt; ZipSink i u m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a -&gt; ZipSink i u m a
forall i u (m :: * -&gt; *) a. Pipe i Void u m a -&gt; ZipSink i u m a
</span><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe i Void u m a -&gt; ZipSink i u m a)
-&gt; (a -&gt; Pipe i Void u m a) -&gt; a -&gt; ZipSink i u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Pipe i Void u m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-626"></span><span>    </span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span id="local-6989586621679108849"><span class="annot"><span class="annottext">p :: Pipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108849"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108848"><span class="annot"><span class="annottext">&lt;*&gt; :: ZipSink i u m (a -&gt; b) -&gt; ZipSink i u m a -&gt; ZipSink i u m b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span id="local-6989586621679108847"><span class="annot"><span class="annottext">q :: Pipe i Void u m a
</span><a href="#local-6989586621679108847"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m b -&gt; ZipSink i u m b
forall i u (m :: * -&gt; *) a. Pipe i Void u m a -&gt; ZipSink i u m a
</span><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe i Void u m b -&gt; ZipSink i u m b)
-&gt; Pipe i Void u m b -&gt; ZipSink i u m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m (a -&gt; b) -&gt; Pipe i Void u m a -&gt; Pipe i Void u m b
forall (m :: * -&gt; *) i u a b.
Monad m =&gt;
Pipe i Void u m (a -&gt; b) -&gt; Pipe i Void u m a -&gt; Pipe i Void u m b
</span><a href="Data.Conduino.html#zipSink"><span class="hs-identifier hs-var">zipSink</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m (a -&gt; b)
</span><a href="#local-6989586621679108849"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a
</span><a href="#local-6989586621679108847"><span class="hs-identifier hs-var">q</span></a></span></span></span></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-comment">-- | '&lt;|&gt;' = distribute input to all, and return the first result that</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- finishes</span><span>
</span><span id="line-630"></span><span class="hs-comment">--</span><span>
</span><span id="line-631"></span><span class="hs-comment">-- 'empty' = never finish</span><span>
</span><span id="line-632"></span><span id="local-6989586621679108844"><span id="local-6989586621679108845"><span id="local-6989586621679108846"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679108837"><span id="local-6989586621679108839"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679108846"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108845"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108844"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108846"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-633"></span><span>    </span><span id="local-6989586621679108836"><span class="annot"><span class="annottext">empty :: ZipSink i u m a
</span><a href="#local-6989586621679108836"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a -&gt; ZipSink i u m a
forall i u (m :: * -&gt; *) a. Pipe i Void u m a -&gt; ZipSink i u m a
</span><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a
forall i o u (m :: * -&gt; *) b. Pipe i o u m b
</span><a href="#local-6989586621679108835"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-634"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-635"></span><span>        </span><span id="local-6989586621679108835"><span class="annot"><span class="annottext">go :: Pipe i o u m b
</span><a href="#local-6989586621679108835"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Maybe i) -&gt; Pipe i o u m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">forever</span></span><span> </span><span class="annot"><span class="annottext">Pipe i o u m (Maybe i)
forall i o u (m :: * -&gt; *). Pipe i o u m (Maybe i)
</span><a href="Data.Conduino.html#await"><span class="hs-identifier hs-var">await</span></a></span><span>
</span><span id="line-636"></span><span>    </span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span id="local-6989586621679108833"><span class="annot"><span class="annottext">p :: Pipe i Void u m a
</span><a href="#local-6989586621679108833"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679108832"><span class="annot"><span class="annottext">&lt;|&gt; :: ZipSink i u m a -&gt; ZipSink i u m a -&gt; ZipSink i u m a
</span><a href="#local-6989586621679108832"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></a></span></span><span> </span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span id="local-6989586621679108831"><span class="annot"><span class="annottext">q :: Pipe i Void u m a
</span><a href="#local-6989586621679108831"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a -&gt; ZipSink i u m a
forall i u (m :: * -&gt; *) a. Pipe i Void u m a -&gt; ZipSink i u m a
</span><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe i Void u m a -&gt; ZipSink i u m a)
-&gt; Pipe i Void u m a -&gt; ZipSink i u m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a -&gt; Pipe i Void u m a -&gt; Pipe i Void u m a
forall (m :: * -&gt; *) i u a.
Monad m =&gt;
Pipe i Void u m a -&gt; Pipe i Void u m a -&gt; Pipe i Void u m a
</span><a href="Data.Conduino.html#altSink"><span class="hs-identifier hs-var">altSink</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a
</span><a href="#local-6989586621679108833"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a
</span><a href="#local-6989586621679108831"><span class="hs-identifier hs-var">q</span></a></span></span></span></span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span id="local-6989586621679108829"><span id="local-6989586621679108830"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-type">ZipSink</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108830"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108829"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-639"></span><span>    </span><span id="local-6989586621679108827"><span class="annot"><span class="annottext">lift :: m a -&gt; ZipSink i u m a
</span><a href="#local-6989586621679108827"><span class="hs-identifier hs-var hs-var hs-var hs-var">lift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pipe i Void u m a -&gt; ZipSink i u m a
forall i u (m :: * -&gt; *) a. Pipe i Void u m a -&gt; ZipSink i u m a
</span><a href="Data.Conduino.html#ZipSink"><span class="hs-identifier hs-var">ZipSink</span></a></span><span> </span><span class="annot"><span class="annottext">(Pipe i Void u m a -&gt; ZipSink i u m a)
-&gt; (m a -&gt; Pipe i Void u m a) -&gt; m a -&gt; ZipSink i u m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; Pipe i Void u m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span></span></span><span>
</span><span id="line-640"></span></pre></body></html>